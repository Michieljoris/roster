<!DOCTYPE html><html><head><title>roster.js</title><meta http-equiv="Content-Type" content="text/html" charset="UTF-8"><link rel="stylesheet" media="all" href="../../docco.css"></head><body><div id="container"><div id="background"></div><div id="jump_to">Jump To &hellip;<div id="jump_wrapper"><div id="jump_page"><a href="../../index.html" class="source"><span class="file_name">README</span></a><a href="../../js/layout.js.html" class="source "><span class="base_path">js / </span><span class="file_name">layout.js</span></a><a href="../../js/calculateTimesheet.js.html" class="source "><span class="base_path">js / </span><span class="file_name">calculateTimesheet.js</span></a><a href="../../js/main.js.html" class="source "><span class="base_path">js / </span><span class="file_name">main.js</span></a><a href="../../js/globals.js.html" class="source "><span class="base_path">js / </span><span class="file_name">globals.js</span></a><a href="../../js/old/liveorig.js.html" class="source "><span class="base_path">js / old / </span><span class="file_name">liveorig.js</span></a><a href="../../js/old/dataclasses.js.html" class="source "><span class="base_path">js / old / </span><span class="file_name">dataclasses.js</span></a><a href="../../js/old/data-structures.js.html" class="source "><span class="base_path">js / old / </span><span class="file_name">data-structures.js</span></a><a href="../../js/old/viewtree.js.html" class="source "><span class="base_path">js / old / </span><span class="file_name">viewtree.js</span></a><a href="../../js/old/testsc.js.html" class="source "><span class="base_path">js / old / </span><span class="file_name">testsc.js</span></a><a href="../../js/old/nodejuice.js.html" class="source "><span class="base_path">js / old / </span><span class="file_name">nodejuice.js</span></a><a href="../../js/old/utils.js.html" class="source "><span class="base_path">js / old / </span><span class="file_name">utils.js</span></a><a href="../../js/old/smartclientui.js.html" class="source "><span class="base_path">js / old / </span><span class="file_name">smartclientui.js</span></a><a href="../../js/old/data-structures.coffee.html" class="source "><span class="base_path">js / old / </span><span class="file_name">data-structures.coffee</span></a><a href="../../js/old/testpouch.js.html" class="source "><span class="base_path">js / old / </span><span class="file_name">testpouch.js</span></a><a href="../../js/old/roster.js.html" class="source selected"><span class="base_path">js / old / </span><span class="file_name">roster.js</span></a><a href="../../js/old/datasources.js.html" class="source "><span class="base_path">js / old / </span><span class="file_name">datasources.js</span></a><a href="../../js/table.js.html" class="source "><span class="base_path">js / </span><span class="file_name">table.js</span></a><a href="../../js/typesAndFields.js.html" class="source "><span class="base_path">js / </span><span class="file_name">typesAndFields.js</span></a><a href="../../js/shiftEditor.js.html" class="source "><span class="base_path">js / </span><span class="file_name">shiftEditor.js</span></a><a href="../../js/fetchTimesheetShifts.js.html" class="source "><span class="base_path">js / </span><span class="file_name">fetchTimesheetShifts.js</span></a><a href="../../js/timesheet_canvas.js.html" class="source "><span class="base_path">js / </span><span class="file_name">timesheet_canvas.js</span></a><a href="../../js/shift.js.html" class="source "><span class="base_path">js / </span><span class="file_name">shift.js</span></a><a href="../../js/personEditor.js.html" class="source "><span class="base_path">js / </span><span class="file_name">personEditor.js</span></a><a href="../../js/editorManager.js.html" class="source "><span class="base_path">js / </span><span class="file_name">editorManager.js</span></a><a href="../../js/editorUtils.js.html" class="source "><span class="base_path">js / </span><span class="file_name">editorUtils.js</span></a><a href="../../js/parentListEditor.js.html" class="source "><span class="base_path">js / </span><span class="file_name">parentListEditor.js</span></a><a href="../../js/testdata.js.html" class="source "><span class="base_path">js / </span><span class="file_name">testdata.js</span></a><a href="../../js/pouchDS.js.html" class="source "><span class="base_path">js / </span><span class="file_name">pouchDS.js</span></a><a href="../../js/viewTree.js.html" class="source "><span class="base_path">js / </span><span class="file_name">viewTree.js</span></a><a href="../../js/quickpouch.js.html" class="source "><span class="base_path">js / </span><span class="file_name">quickpouch.js</span></a><a href="../../js/editorLoader.js.html" class="source "><span class="base_path">js / </span><span class="file_name">editorLoader.js</span></a><a href="../../js/timesheet.js.html" class="source "><span class="base_path">js / </span><span class="file_name">timesheet.js</span></a><a href="../../js/calendar.js.html" class="source "><span class="base_path">js / </span><span class="file_name">calendar.js</span></a><a href="../../js/locationEditor.js.html" class="source "><span class="base_path">js / </span><span class="file_name">locationEditor.js</span></a><a href="../../js/shiftQualifier.js.html" class="source "><span class="base_path">js / </span><span class="file_name">shiftQualifier.js</span></a><a href="../../js/test.js.html" class="source "><span class="base_path">js / </span><span class="file_name">test.js</span></a><a href="../../js/calculateTimesheetColumn.js.html" class="source "><span class="base_path">js / </span><span class="file_name">calculateTimesheetColumn.js</span></a><a href="../../js/tableFilter.js.html" class="source "><span class="base_path">js / </span><span class="file_name">tableFilter.js</span></a></div></div></div><table cellpadding="0" cellspacing="0"><thead><tr><th class="docs"><h1>roster.js</h1><div class="filepath">js/old/</div></th><th class="code"></th></tr></thead><tbody><tr id="section-1"><td class="docs"><div class="pilwrap"><a href="#section-1" class="pilcrow">&#182;</a></div><div class="dox"><div class="summary"><p>lobal isc:false define:false emit:false</p></div><div class="body"></div></div><div class="dox"><div class="summary"><p>shint strict:true unused:true smarttabs:true eqeqeq:true immed: true undef:true</p></div><div class="body"></div></div><div class="dox"><div class="summary"><p>shint maxparams:5 maxcomplexity:8 maxlen:190 devel:true</p></div><div class="body"></div></div>
</td><td class="code"><div class="highlight"><pre><span class="nx">define</span>
<span class="p">({</span> 
   <span class="nx">factory</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
       <span class="s2">&quot;use strict&quot;</span><span class="p">;</span>
       <span class="kd">var</span> <span class="nx">roster</span> <span class="o">=</span> <span class="p">{};</span>
       
       <span class="kd">var</span> <span class="nx">views</span> <span class="o">=</span> <span class="p">{</span>
           <span class="nx">all</span><span class="o">:</span> <span class="p">{</span>   <span class="nx">map</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span> <span class="p">{</span> <span class="nx">emit</span><span class="p">(</span><span class="nx">doc</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span> <span class="p">}</span>
              <span class="p">,</span><span class="nx">reduce</span><span class="o">:</span> <span class="kc">false</span><span class="p">}</span>
           <span class="p">,</span><span class="nx">shift</span><span class="o">:</span> <span class="p">{</span> <span class="nx">map</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span> <span class="p">{</span>
         <span class="k">if</span> <span class="p">(</span><span class="nx">doc</span><span class="p">.</span><span class="nx">group</span> <span class="o">===</span> <span class="s1">&#39;shift&#39;</span><span class="p">)</span> <span class="nx">emit</span><span class="p">(</span><span class="nx">doc</span><span class="p">,</span><span class="kc">null</span><span class="p">);}</span>
         <span class="p">,</span><span class="nx">reduce</span><span class="o">:</span> <span class="kc">false</span><span class="p">}</span>
           <span class="p">,</span><span class="nx">location</span><span class="o">:</span> <span class="p">{</span> <span class="nx">map</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span> <span class="p">{</span>
         <span class="k">if</span> <span class="p">(</span><span class="nx">doc</span><span class="p">.</span><span class="nx">group</span> <span class="o">===</span> <span class="s1">&#39;location&#39;</span><span class="p">)</span> <span class="nx">emit</span><span class="p">(</span><span class="nx">doc</span><span class="p">,</span><span class="kc">null</span><span class="p">);}</span>
            <span class="p">,</span><span class="nx">reduce</span><span class="o">:</span> <span class="kc">false</span><span class="p">}</span>
          
           <span class="p">,</span><span class="nx">person</span><span class="o">:</span> <span class="p">{</span> <span class="nx">map</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span> <span class="p">{</span>
         <span class="k">if</span> <span class="p">(</span><span class="nx">doc</span><span class="p">.</span><span class="nx">group</span> <span class="o">===</span> <span class="s1">&#39;person&#39;</span><span class="p">)</span> <span class="nx">emit</span><span class="p">(</span><span class="nx">doc</span><span class="p">,</span><span class="kc">null</span><span class="p">);}</span>
          <span class="p">,</span><span class="nx">reduce</span><span class="o">:</span> <span class="kc">false</span><span class="p">}</span>
           <span class="p">,</span><span class="nx">role</span><span class="o">:</span> <span class="p">{</span> <span class="nx">map</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span> <span class="p">{</span>
         <span class="k">if</span> <span class="p">(</span><span class="nx">doc</span><span class="p">.</span><span class="nx">group</span> <span class="o">===</span> <span class="s1">&#39;role&#39;</span><span class="p">)</span> <span class="nx">emit</span><span class="p">(</span><span class="nx">doc</span><span class="p">,</span><span class="kc">null</span><span class="p">);}</span>
        <span class="p">,</span><span class="nx">reduce</span><span class="o">:</span> <span class="kc">false</span><span class="p">}</span>
           <span class="p">,</span><span class="nx">uiState</span><span class="o">:</span> <span class="p">{</span> <span class="nx">map</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">doc</span><span class="p">)</span> <span class="p">{</span>
         <span class="k">if</span> <span class="p">(</span><span class="nx">doc</span><span class="p">.</span><span class="nx">group</span> <span class="o">===</span> <span class="s1">&#39;uiState&#39;</span><span class="p">)</span> <span class="nx">emit</span><span class="p">(</span><span class="nx">doc</span><span class="p">,</span><span class="kc">null</span><span class="p">);}</span>
           <span class="p">,</span><span class="nx">reduce</span><span class="o">:</span> <span class="kc">false</span><span class="p">}</span>
       <span class="p">};</span>
       
       <span class="kd">var</span> <span class="nx">fields</span> <span class="o">=</span> <span class="p">[</span>
              <span class="p">{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;startDate&quot;</span><span class="p">,</span> <span class="nx">title</span><span class="o">:</span> <span class="s2">&quot;blabla&quot;</span><span class="p">,</span> <span class="nx">required</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;datetime&quot;</span><span class="p">}</span>
               <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;endDate&quot;</span><span class="p">,</span> <span class="nx">required</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;datetime&quot;</span><span class="p">}</span>
               <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;person&quot;</span><span class="p">,</span>  <span class="nx">title</span><span class="o">:</span> <span class="s2">&quot;blablabal&quot;</span><span class="p">,</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;list&#39;</span><span class="p">}</span>
               <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;location&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;text&quot;</span><span class="p">}</span> 
               <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;notes&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;text&quot;</span><span class="p">}</span>
               <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;ad&quot;</span><span class="p">,</span> <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;All day&#39;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;boolean&#39;</span><span class="p">}</span> <span class="c1">//allday</span>
               <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;claim&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">}</span> 
               <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;sleepOver&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;boolean&#39;</span><span class="p">}</span>
               <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">}</span>
               <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;address&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">}</span>
               <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;suburb&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">}</span>
               <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;state&quot;</span><span class="p">,</span><span class="nx">detail</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">}</span>
               <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;phone&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">}</span>
               <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;mobPhone&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">}</span>
               <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;email&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">}</span>
               <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;postalCode&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">}</span>
               <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;region&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">}</span>
               <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;firstName&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">}</span>
               <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;lastName&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">}</span>
               <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;shortName&quot;</span><span class="p">,</span> <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;blabla&#39;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">}</span>
               <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;sex&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">}</span>
               <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;award&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">}</span>
               <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;login&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">}</span>
               <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;autoLogin&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">}</span>
               <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;password&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">}</span>
               <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;role&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">}</span>
               <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;permissions&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="nx">group</span><span class="o">:</span> <span class="s1">&#39;role&#39;</span><span class="p">}</span>
           <span class="p">];</span>
       
       <span class="kd">var</span> <span class="nx">types</span> <span class="o">=</span> <span class="p">{</span>
           <span class="nx">shift</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;startDate&#39;</span><span class="p">,</span> <span class="s1">&#39;endDate&#39;</span><span class="p">,</span> <span class="s1">&#39;person&#39;</span><span class="p">,</span> <span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="s1">&#39;notes&#39;</span><span class="p">,</span> <span class="s1">&#39;ad&#39;</span><span class="p">,</span> <span class="s1">&#39;claim&#39;</span><span class="p">,</span> <span class="s1">&#39;sleepOver&#39;</span><span class="p">],</span>
           <span class="nx">location</span><span class="o">:</span> <span class="p">[],</span>
           <span class="nx">person</span><span class="o">:</span> <span class="p">[],</span>
           <span class="nx">role</span><span class="o">:</span> <span class="p">[]</span>
       <span class="p">};</span>
       </pre></div></td></tr><tr id="section-2"><td class="docs"><div class="pilwrap"><a href="#section-2" class="pilcrow">&#182;</a></div><p>shift, location, person, role</p>
</td><td class="code"><div class="highlight"><pre>       <span class="kd">var</span> <span class="nx">groupField</span> <span class="o">=</span>
               <span class="p">{</span><span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Type&#39;</span><span class="p">,</span> <span class="nx">name</span><span class="o">:</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="nx">required</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span> <span class="p">};</span>
       </pre></div></td></tr><tr id="section-3"><td class="docs"><div class="pilwrap"><a href="#section-3" class="pilcrow">&#182;</a></div><p>,{name:"inheritable", group: ['location', 'person', 'shift', 'role']}//,,, change to notes</p>
</td><td class="code"><div class="highlight"><pre>       </pre></div></td></tr><tr id="section-4"><td class="docs"><div class="pilwrap"><a href="#section-4" class="pilcrow">&#182;</a></div><p>,{name:"parents", type: 'list', group: ['location', 'person', 'shift', 'role']}//,,, change to notes</p>
</td><td class="code"><div class="highlight"><pre>       
    
       <span class="kd">var</span> <span class="nx">tagArray</span> <span class="o">=</span> <span class="p">[</span>
               <span class="p">{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;_id&quot;</span><span class="p">,</span> <span class="nx">primaryKey</span><span class="o">:</span><span class="kc">true</span><span class="p">}</span>
           <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;_rev&quot;</span><span class="p">}</span>
           <span class="p">,</span><span class="nx">groupField</span></pre></div></td></tr><tr id="section-5"><td class="docs"><div class="pilwrap"><a href="#section-5" class="pilcrow">&#182;</a></div><p>shift 
,{ title: "blabla", name:"newcolumn", required: true, type: "datetime", group: 'shift'}</p>
</td><td class="code"><div class="highlight"><pre>           <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;startDate&quot;</span><span class="p">,</span> <span class="nx">title</span><span class="o">:</span> <span class="s2">&quot;blabla&quot;</span><span class="p">,</span> <span class="nx">required</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;datetime&quot;</span><span class="p">,</span> <span class="nx">group</span><span class="o">:</span> <span class="s1">&#39;shift&#39;</span><span class="p">}</span></pre></div></td></tr><tr id="section-6"><td class="docs"><div class="pilwrap"><a href="#section-6" class="pilcrow">&#182;</a></div><p>,{name:"startTime", required: true, type: "time", group: 'shift'}</p>
</td><td class="code"><div class="highlight"><pre>           <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;endDate&quot;</span><span class="p">,</span> <span class="nx">required</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;datetime&quot;</span><span class="p">,</span> <span class="nx">group</span><span class="o">:</span> <span class="s1">&#39;shift&#39;</span><span class="p">}</span></pre></div></td></tr><tr id="section-7"><td class="docs"><div class="pilwrap"><a href="#section-7" class="pilcrow">&#182;</a></div><p>,{name:"endTime", required: true, type: "time", group: 'shift'}</p>
</td><td class="code"><div class="highlight"><pre>           <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;person&quot;</span><span class="p">,</span>  <span class="nx">title</span><span class="o">:</span> <span class="s2">&quot;blablabal&quot;</span><span class="p">,</span><span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="nx">group</span><span class="o">:</span> <span class="s1">&#39;shift&#39;</span><span class="p">}</span>
           <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;location&quot;</span><span class="p">,</span> <span class="nx">group</span><span class="o">:</span> <span class="s1">&#39;shift&#39;</span><span class="p">}</span> 
           <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;notes&quot;</span><span class="p">,</span> <span class="nx">group</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="s1">&#39;person&#39;</span><span class="p">,</span> <span class="s1">&#39;shift&#39;</span><span class="p">,</span> <span class="s1">&#39;role&#39;</span><span class="p">]}</span><span class="c1">//,,, change to notes</span>
           <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;inheritable&quot;</span><span class="p">,</span> <span class="nx">group</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="s1">&#39;person&#39;</span><span class="p">,</span> <span class="s1">&#39;shift&#39;</span><span class="p">,</span> <span class="s1">&#39;role&#39;</span><span class="p">]}</span><span class="c1">//,,, change to notes</span>
            
           <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;parents&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="nx">group</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="s1">&#39;person&#39;</span><span class="p">,</span> <span class="s1">&#39;shift&#39;</span><span class="p">,</span> <span class="s1">&#39;role&#39;</span><span class="p">]}</span><span class="c1">//,,, change to notes</span>
           <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;ad&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;boolean&#39;</span><span class="p">,</span> <span class="nx">group</span><span class="o">:</span> <span class="s1">&#39;shift&#39;</span><span class="p">}</span> <span class="c1">//allday</span>
           <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;claim&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="nx">group</span><span class="o">:</span> <span class="s1">&#39;shift&#39;</span><span class="p">}</span> 
           <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;sleepOver&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;boolean&#39;</span><span class="p">,</span> <span class="nx">group</span><span class="o">:</span> <span class="s1">&#39;shift&#39;</span><span class="p">}</span>
            
        </pre></div></td></tr><tr id="section-8"><td class="docs"><div class="pilwrap"><a href="#section-8" class="pilcrow">&#182;</a></div><p>location</p>
</td><td class="code"><div class="highlight"><pre>           <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="nx">group</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="s1">&#39;role&#39;</span><span class="p">]}</span>
           <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;shortName&quot;</span><span class="p">,</span> <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;blabla&#39;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="nx">group</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="s1">&#39;person&#39;</span><span class="p">]}</span>
           <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;address&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="nx">group</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="s1">&#39;person&#39;</span><span class="p">]}</span>
           <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;suburb&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="nx">group</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="s1">&#39;person&#39;</span><span class="p">]}</span>
           <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;state&quot;</span><span class="p">,</span><span class="nx">detail</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="nx">group</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="s1">&#39;person&#39;</span><span class="p">]}</span>
           <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;phone&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="nx">group</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="s1">&#39;person&#39;</span><span class="p">]}</span>
           <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;mobPhone&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="nx">group</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="s1">&#39;person&#39;</span><span class="p">]}</span>
           <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;email&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="nx">group</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="s1">&#39;person&#39;</span><span class="p">]}</span>
           <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;postalCode&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="nx">group</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="s1">&#39;person&#39;</span><span class="p">]}</span>
           <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;region&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="nx">group</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;location&#39;</span> <span class="p">]}</span>
        
        </pre></div></td></tr><tr id="section-9"><td class="docs"><div class="pilwrap"><a href="#section-9" class="pilcrow">&#182;</a></div><p>person </p>
</td><td class="code"><div class="highlight"><pre>           <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;firstName&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="nx">group</span><span class="o">:</span> <span class="s1">&#39;person&#39;</span><span class="p">}</span>
           <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;lastName&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="nx">group</span><span class="o">:</span> <span class="s1">&#39;person&#39;</span><span class="p">}</span>
           <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;sex&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="nx">group</span><span class="o">:</span> <span class="s1">&#39;person&#39;</span><span class="p">}</span>
           <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;award&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="nx">group</span><span class="o">:</span> <span class="s1">&#39;person&#39;</span><span class="p">}</span>
           <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;login&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="nx">group</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;person&#39;</span><span class="p">]}</span>
           <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;autoLogin&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="nx">group</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;person&#39;</span><span class="p">]}</span>
           <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;password&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="nx">group</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;person&#39;</span><span class="p">]}</span>
           <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;role&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="nx">group</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;person&#39;</span><span class="p">]}</span>
        </pre></div></td></tr><tr id="section-10"><td class="docs"><div class="pilwrap"><a href="#section-10" class="pilcrow">&#182;</a></div><p>role </p>
</td><td class="code"><div class="highlight"><pre>           <span class="p">,{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;permissions&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="nx">group</span><span class="o">:</span> <span class="s1">&#39;role&#39;</span><span class="p">}</span>
        </pre></div></td></tr><tr id="section-11"><td class="docs"><div class="pilwrap"><a href="#section-11" class="pilcrow">&#182;</a></div><p>needed for recurrence
,{name:"rrule", group: ['shift']}
,{name:"duration", group: ['shift']}
treeGrids:
,{name:"treeParent", foreignKey: pouchDS._id', group: []}
,{name:"viewName", group: []}
these props need not be persistent, see extensible's Eventmappings.js
,{name:"origid"}
,{name:"ristart"},
,{name:"redit"}
obsolete
{name:"eventId", primaryKey: true, type: "sequence"},
,{name:"cid"} //mapped to name in EventMappings
,{name:"notes"} // mapped to description in EventMappings
,{name:"start"} // mapped to startDate in EventMappings
,{name:"end"}// mapped to endDate in EventMappings</p>
</td><td class="code"><div class="highlight"><pre>       <span class="p">];</span>
    
       <span class="kd">var</span> <span class="nx">tags</span> <span class="o">=</span> <span class="p">{};</span>
       <span class="kd">var</span> <span class="nx">tagGroups</span> <span class="o">=</span> <span class="p">{};</span>
       <span class="kd">function</span> <span class="nx">addTagToGroup</span><span class="p">(</span><span class="nx">tag</span><span class="p">,</span> <span class="nx">group</span><span class="p">)</span> <span class="p">{</span>
           <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">tagGroups</span><span class="p">[</span><span class="nx">group</span><span class="p">])</span> <span class="nx">tagGroups</span><span class="p">[</span><span class="nx">group</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>
           <span class="k">if</span> <span class="p">(</span><span class="nx">tagGroups</span><span class="p">[</span><span class="nx">group</span><span class="p">].</span><span class="nx">containsProperty</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="nx">tag</span><span class="p">.</span><span class="nx">name</span><span class="p">))</span>
               <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;ERROR: double tag&#39;</span><span class="p">,</span> <span class="nx">tag</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
           <span class="k">else</span> <span class="nx">tagGroups</span><span class="p">[</span><span class="nx">group</span><span class="p">].</span><span class="nx">push</span><span class="p">(</span><span class="nx">tag</span><span class="p">);</span>
       <span class="p">}</span>
    
       <span class="nx">tagArray</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span>
           <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
               <span class="nx">t</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="nx">isc</span><span class="p">.</span><span class="nx">DataSource</span><span class="p">.</span><span class="nx">getAutoTitle</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span> 
         <span class="nx">tags</span><span class="p">[</span><span class="nx">t</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">t</span><span class="p">;</span>  
               <span class="k">if</span> <span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">group</span><span class="p">)</span> <span class="p">{</span>
                   <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">t</span><span class="p">.</span><span class="nx">group</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="p">{</span>
                       <span class="nx">addTagToGroup</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="nx">t</span><span class="p">.</span><span class="nx">group</span><span class="p">);</span> 
                   <span class="p">}</span> 
                   <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">isc</span><span class="p">.</span><span class="nx">isA</span><span class="p">.</span><span class="nb">Array</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">group</span><span class="p">))</span> <span class="p">{</span>
                       <span class="nx">t</span><span class="p">.</span><span class="nx">group</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">g</span><span class="p">)</span> <span class="p">{</span>
                           <span class="nx">addTagToGroup</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="nx">g</span><span class="p">);</span> 
                       <span class="p">});</span>  
                   <span class="p">}</span>
                   <span class="k">else</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;ERROR: group prop is neither a string or array&#39;</span><span class="p">);</span>
               <span class="p">}</span>
           <span class="p">});</span>
    
    
       <span class="kd">function</span> <span class="nx">getTagsCloner</span><span class="p">(</span><span class="nx">groups</span><span class="p">)</span> <span class="p">{</span>
           <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="p">[];</span> </pre></div></td></tr><tr id="section-12"><td class="docs"><div class="pilwrap"><a href="#section-12" class="pilcrow">&#182;</a></div><p>console.log(groups);</p>
</td><td class="code"><div class="highlight"><pre>           <span class="k">if</span> <span class="p">(</span><span class="nx">groups</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
               <span class="nx">result</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">name</span><span class="o">:</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span><span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="nx">title</span><span class="o">:</span><span class="s1">&#39;Type&#39;</span><span class="p">});</span>
           <span class="p">}</span>
           <span class="nx">tagArray</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span>
               <span class="k">if</span> <span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">group</span><span class="p">)</span> <span class="p">{</span>
                   <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">t</span><span class="p">.</span><span class="nx">group</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="p">{</span>
                       <span class="k">if</span> <span class="p">(</span><span class="nx">groups</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">group</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
                           <span class="o">!</span><span class="nx">result</span><span class="p">.</span><span class="nx">containsProperty</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="nx">t</span><span class="p">.</span><span class="nx">name</span><span class="p">))</span> <span class="nx">result</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">t</span><span class="p">);</span>
                   <span class="p">}</span> 
                   <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">isc</span><span class="p">.</span><span class="nx">isA</span><span class="p">.</span><span class="nb">Array</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">group</span><span class="p">))</span> <span class="p">{</span>
                       <span class="nx">t</span><span class="p">.</span><span class="nx">group</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">g</span><span class="p">)</span> <span class="p">{</span>
                           <span class="k">if</span> <span class="p">(</span><span class="nx">groups</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">g</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
                               <span class="o">!</span><span class="nx">result</span><span class="p">.</span><span class="nx">containsProperty</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="nx">t</span><span class="p">.</span><span class="nx">name</span><span class="p">))</span> <span class="nx">result</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">t</span><span class="p">);</span>
                       <span class="p">});</span>  
                   <span class="p">}</span>
               <span class="p">}});</span>
           <span class="k">return</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
               <span class="k">return</span> <span class="nx">isc</span><span class="p">.</span><span class="nx">shallowClone</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
           <span class="p">};</span></pre></div></td></tr><tr id="section-13"><td class="docs"><div class="pilwrap"><a href="#section-13" class="pilcrow">&#182;</a></div><p>return result;</p>
</td><td class="code"><div class="highlight"><pre>       <span class="p">}</span>
        
       <span class="kd">var</span> <span class="nx">groups</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
           <span class="kd">var</span> <span class="nx">groups</span> <span class="o">=</span> <span class="p">[];</span>
           <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">e</span> <span class="k">in</span> <span class="nx">tagGroups</span><span class="p">)</span> <span class="nx">groups</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
           <span class="k">return</span> <span class="nx">groups</span><span class="p">;</span>
       <span class="p">})();</span>
        
       <span class="nx">groupField</span><span class="p">.</span><span class="nx">valueMap</span> <span class="o">=</span> <span class="nx">groups</span><span class="p">;</span>   
        
        
    
       <span class="nx">roster</span> <span class="o">=</span> <span class="p">{</span>
           <span class="nx">views</span><span class="o">:</span> <span class="nx">views</span><span class="p">,</span>
           <span class="nx">types</span><span class="o">:</span><span class="nx">groups</span><span class="p">,</span>
           <span class="nx">getFieldsCloner</span><span class="o">:</span> <span class="nx">getTagsCloner</span><span class="p">,</span>
           <span class="nx">tagArray</span><span class="o">:</span> <span class="nx">isc</span><span class="p">.</span><span class="nx">shallowClone</span><span class="p">(</span><span class="nx">tagArray</span><span class="p">),</span>
           <span class="nx">tags</span><span class="o">:</span> <span class="nx">tags</span><span class="p">,</span>
           <span class="nx">dbname</span><span class="o">:</span> <span class="nb">window</span><span class="p">.</span><span class="nx">dbname</span></pre></div></td></tr><tr id="section-14"><td class="docs"><div class="pilwrap"><a href="#section-14" class="pilcrow">&#182;</a></div><p>tagGroups: tagGroups,</p>
</td><td class="code"><div class="highlight"><pre>       <span class="p">};</span>
       <span class="k">return</span> <span class="nx">roster</span><span class="p">;</span> 
   <span class="p">}});</span>

</pre></div></td></tr></tbody></table><div id="generated">generated Thu Jan 17 2013 03:12:15 GMT+1000 (EST)  </div></div></body></html>