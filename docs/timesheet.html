<!DOCTYPE html>  <html> <head>   <title>timesheet.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="calculateTimesheet.html">                 calculateTimesheet.js               </a>                                           <a class="source" href="calculateTimesheetColumn.html">                 calculateTimesheetColumn.js               </a>                                           <a class="source" href="calendar.html">                 calendar.js               </a>                                           <a class="source" href="editorLoader.html">                 editorLoader.js               </a>                                           <a class="source" href="editorManager.html">                 editorManager.js               </a>                                           <a class="source" href="editorUtils.html">                 editorUtils.js               </a>                                           <a class="source" href="fetchTimesheetShifts.html">                 fetchTimesheetShifts.js               </a>                                           <a class="source" href="globals.html">                 globals.js               </a>                                           <a class="source" href="layout.html">                 layout.js               </a>                                           <a class="source" href="locationEditor.html">                 locationEditor.js               </a>                                           <a class="source" href="main.html">                 main.js               </a>                                           <a class="source" href="parentListEditor.html">                 parentListEditor.js               </a>                                           <a class="source" href="personEditor.html">                 personEditor.js               </a>                                           <a class="source" href="pouchDS.html">                 pouchDS.js               </a>                                           <a class="source" href="quickpouch.html">                 quickpouch.js               </a>                                           <a class="source" href="shift.html">                 shift.js               </a>                                           <a class="source" href="shiftEditor.html">                 shiftEditor.js               </a>                                           <a class="source" href="shiftQualifier.html">                 shiftQualifier.js               </a>                                           <a class="source" href="table.html">                 table.js               </a>                                           <a class="source" href="tableFilter.html">                 tableFilter.js               </a>                                           <a class="source" href="test.html">                 test.js               </a>                                           <a class="source" href="testdata.html">                 testdata.js               </a>                                           <a class="source" href="timesheet.html">                 timesheet.js               </a>                                           <a class="source" href="timesheet_canvas.html">                 timesheet_canvas.js               </a>                                           <a class="source" href="typesAndFields.html">                 typesAndFields.js               </a>                                           <a class="source" href="viewTree.html">                 viewTree.js               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               timesheet.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="cm">/*global logger:false isc:false define:false */</span>
<span class="cm">/*jshint strict:true unused:true smarttabs:true eqeqeq:true immed: true undef:true*/</span>
<span class="cm">/*jshint maxparams:5 maxcomplexity:7 maxlen:190 devel:true*/</span>

<span class="nx">define</span>
<span class="p">({</span> <span class="c1">//load: [&#39;editorLoader&#39;],</span>
   <span class="nx">inject</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;calculateTimesheet&#39;</span><span class="p">],</span>
   <span class="nx">factory</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">calculateTimesheet</span><span class="p">)</span> 
    <span class="p">{</span> <span class="s2">&quot;use strict&quot;</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">log</span> <span class="o">=</span> <span class="nx">logger</span><span class="p">(</span><span class="s1">&#39;timesheet&#39;</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">observer</span><span class="p">;</span>
      
      <span class="kd">var</span> <span class="nx">currentState</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">defaultState</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">person</span><span class="o">:</span><span class="s1">&#39;guest&#39;</span><span class="p">,</span> <span class="nx">location</span><span class="o">:</span><span class="s1">&#39;E745F82E-1CC9-46B5-A320-38F9595C6847&#39;</span><span class="p">,</span> <span class="nx">fortnight</span><span class="o">:</span><span class="s1">&#39;2013-01-01T11:00:00.000Z&#39;</span><span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>var settings = {
    // minimumShiftLength: 10,
    // maximumShiftLength: 600,
    // eventSnapGap: 15, //only works with a refresh
    // workdayStart: '6:00',
    // workdayEnd: '22:00',
    // currentViewName: 'week', //day, week or month
    chosenDate: new Date()
};</p>             </td>             <td class="code">               <div class="highlight"><pre>      
      <span class="kd">function</span> <span class="nx">getState</span><span class="p">()</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">state</span> <span class="o">=</span>  <span class="nx">isc</span><span class="p">.</span><span class="nx">addProperties</span><span class="p">(</span><span class="nx">currentState</span><span class="p">,</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>grid: dataTable.getViewState(),
criteria : dataTable.getFilterEditorCriteria(),</p>             </td>             <td class="code">               <div class="highlight"><pre>              </pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>//editor
height: (function() {
    if (stack.sectionIsExpanded('Editor')) 
        return dataTable.getHeight();
    else return editorHeightExpanded;
})(),
isExpanded: stack.sectionIsExpanded('Editor')</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="p">});</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>isc.addProperties(state, tableFilter.getState());
log.d('getTableState', isc.clone(state));</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="nx">currentState</span> <span class="o">=</span> <span class="nx">isc</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="nx">state</span><span class="p">);</span>
          <span class="k">return</span> <span class="nx">currentState</span><span class="p">;</span>
      <span class="p">}</span> 
      
      <span class="kd">function</span> <span class="nx">setState</span><span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">log</span><span class="p">.</span><span class="nx">d</span><span class="p">(</span><span class="s2">&quot;hello from timesheet&quot;</span><span class="p">);</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">currentState</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">state</span> <span class="o">===</span> <span class="nx">currentState</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
          
          <span class="nx">state</span> <span class="o">=</span> <span class="nx">isc</span><span class="p">.</span><span class="nx">addProperties</span><span class="p">(</span><span class="nx">defaultState</span><span class="p">,</span> <span class="nx">isc</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="nx">state</span><span class="p">));</span>
          <span class="nx">log</span><span class="p">.</span><span class="nx">d</span><span class="p">(</span><span class="nx">state</span><span class="p">);</span>
          <span class="nx">calculateTimesheet</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="nx">state</span><span class="p">.</span><span class="nx">person</span><span class="p">,</span> <span class="nx">state</span><span class="p">.</span><span class="nx">location</span><span class="p">,</span> <span class="nx">state</span><span class="p">.</span><span class="nx">fortnight</span><span class="p">);</span>    
      <span class="p">}</span>
      
      <span class="kd">var</span> <span class="nx">timesheet</span> <span class="o">=</span> <span class="nx">isc</span><span class="p">.</span><span class="nx">ListGrid</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span>
          <span class="p">{</span>   
        <span class="nx">ID</span><span class="o">:</span> <span class="s2">&quot;timesheet&quot;</span><span class="p">,</span>
               
              <span class="nx">width</span><span class="o">:</span><span class="mi">500</span><span class="p">,</span> <span class="nx">height</span><span class="o">:</span><span class="mi">224</span><span class="p">,</span> <span class="nx">alternateRecordStyles</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span>
              <span class="nx">fields</span><span class="o">:</span><span class="p">[</span>
                  <span class="p">{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;countryCode&quot;</span><span class="p">,</span> <span class="nx">title</span><span class="o">:</span><span class="s2">&quot;Code&quot;</span><span class="p">},</span>
                  <span class="p">{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;countryName&quot;</span><span class="p">,</span> <span class="nx">title</span><span class="o">:</span><span class="s2">&quot;Country&quot;</span><span class="p">},</span>
                  <span class="p">{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;capital&quot;</span><span class="p">,</span> <span class="nx">title</span><span class="o">:</span><span class="s2">&quot;Capital&quot;</span><span class="p">}</span>
              <span class="p">],</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>data: countryData
dataSource: pouchDS,
showEmptyMessage: true,
emptyMessage: "<br>Click the <b>Green plus butoon</b> to populate this grid.", <br />
gridComponents:[toolStrip,"filterEditor", "header",  "body"],
// titleField: 'title',
// useAllDataSourceFields:true,
//looks
alternateRecordStyles:true, 
//behaviour
selectionType:"single",
// headerAutoFitEvent:"doubleClick",
canHover:true,
canReorderRecords:true,
autoFetchData: true,
//editing
recordClick: function (viewer, record) {
    var action = function() {
        editRecord(record); 
    };
    setEditor(action);
},</p>             </td>             <td class="code">               <div class="highlight"><pre>              </pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>cellChanged: function (record) {
    var action = function() {
        editRecord(record); 
    };
    setEditor(action);
},
// recordClick: updateEditForm,
canEdit:true,
modalEditing:true,
// cellChanged: updateEditForm,
editByCell: true,
//filteringg
showFilterEditor:true,
filterOnKeypress: true,
allowFilterExpressions: true,
showDetailFields: false, 
filterButtonPrompt: 'Clear filter',
filterButtonProperties: {
    click : function () {
        dataTable.clearCriteria();
        var appliedCriteria = isc.DataSource.combineCriteria(
            dataTable.typeFilter,state.savedAdvCriteria);
        dataTable.filterData(appliedCriteria);
        tableViewStateChanged('clearSimpleFilter');
    },
    icon:'clear.png',
    showRollOverIcon: false,
    showDownIcon: true
},</p>             </td>             <td class="code">               <div class="highlight"><pre>               </pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>// headerContextMenu: true,
// FilterText: 'Clear inline filter',
viewStateChanged: function() { tableViewStateChanged('viewStateChanged'); },
//       showEmptyMessage: true,
// emptyMessage: "<br>Click the <b>Set data</b> button to populate this grid.",
// cellContextClick:"return itemListMenu.showContextMenu()",
// Function to update details based on selection
filterEditorSubmit: function() {
    log.d('modified filter');
    tableViewStateChanged('filterEditorSubmit');
    // storeTableViewState();
},
setTypingState: setTypingState,
setFilterLabel: function(label) {
    tableFilterLabel.setContents(label);
},
setTypeLabel: function(label) {
    tableTypeLabel.setContents(label);
},
contextMenu: tableContextMenu
// bodyKeyPress : function() { 
//    log.d('keypress');
//    return true; 
// }</p>             </td>             <td class="code">               <div class="highlight"><pre>             
              <span class="nx">notify</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">newState</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">log</span><span class="p">.</span><span class="nx">d</span><span class="p">(</span><span class="s1">&#39;timesheet is notified&#39;</span><span class="p">);</span>
                  <span class="nx">setState</span><span class="p">(</span><span class="nx">newState</span><span class="p">);</span>
                
              <span class="p">}</span>
              <span class="p">,</span><span class="nx">getState</span><span class="o">:</span> <span class="nx">getState</span>
              <span class="p">,</span><span class="nx">setObserver</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span> <span class="p">{</span>
                  <span class="nx">observer</span> <span class="o">=</span> <span class="nx">f</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="p">,</span><span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Timesheet&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>,icon: "calendar.png"</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="p">});</span>
        
    
      <span class="k">return</span> <span class="nx">timesheet</span><span class="p">;</span>
     
     
    <span class="p">}});</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 