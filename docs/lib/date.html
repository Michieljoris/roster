<!DOCTYPE html>  <html> <head>   <title>date.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="bootstrap.html">                 bootstrap.js               </a>                                           <a class="source" href="date.html">                 date.js               </a>                                           <a class="source" href="font.html">                 font.js               </a>                                           <a class="source" href="livepage.html">                 livepage.js               </a>                                           <a class="source" href="logger.html">                 logger.js               </a>                                           <a class="source" href="pouch.alpha.min.html">                 pouch.alpha.min.js               </a>                                           <a class="source" href="pouch.alphal.html">                 pouch.alphal.js               </a>                                           <a class="source" href="pouch.html">                 pouch.js               </a>                                           <a class="source" href="utils.html">                 utils.js               </a>                                           <a class="source" href="vow.html">                 vow.js               </a>                                           <a class="source" href="when.html">                 when.js               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               date.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="cm">/**</span>
<span class="cm"> * Version: 1.0 Alpha-1 </span>
<span class="cm"> * Build Date: 13-Nov-2007</span>
<span class="cm"> * Copyright (c) 2006-2007, Coolite Inc. (http://www.coolite.com/). All rights reserved.</span>
<span class="cm"> * License: Licensed under The MIT License. See license.txt and http://www.datejs.com/license/. </span>
<span class="cm"> * Website: http://www.datejs.com/ or http://www.coolite.com/datejs/</span>
<span class="cm"> */</span>
<span class="nb">Date</span><span class="p">.</span><span class="nx">CultureInfo</span><span class="o">=</span><span class="p">{</span><span class="nx">name</span><span class="o">:</span><span class="s2">&quot;en-US&quot;</span><span class="p">,</span><span class="nx">englishName</span><span class="o">:</span><span class="s2">&quot;English (United States)&quot;</span><span class="p">,</span><span class="nx">nativeName</span><span class="o">:</span><span class="s2">&quot;English (United States)&quot;</span><span class="p">,</span><span class="nx">dayNames</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;Sunday&quot;</span><span class="p">,</span><span class="s2">&quot;Monday&quot;</span><span class="p">,</span><span class="s2">&quot;Tuesday&quot;</span><span class="p">,</span><span class="s2">&quot;Wednesday&quot;</span><span class="p">,</span><span class="s2">&quot;Thursday&quot;</span><span class="p">,</span><span class="s2">&quot;Friday&quot;</span><span class="p">,</span><span class="s2">&quot;Saturday&quot;</span><span class="p">],</span><span class="nx">abbreviatedDayNames</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;Sun&quot;</span><span class="p">,</span><span class="s2">&quot;Mon&quot;</span><span class="p">,</span><span class="s2">&quot;Tue&quot;</span><span class="p">,</span><span class="s2">&quot;Wed&quot;</span><span class="p">,</span><span class="s2">&quot;Thu&quot;</span><span class="p">,</span><span class="s2">&quot;Fri&quot;</span><span class="p">,</span><span class="s2">&quot;Sat&quot;</span><span class="p">],</span><span class="nx">shortestDayNames</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;Su&quot;</span><span class="p">,</span><span class="s2">&quot;Mo&quot;</span><span class="p">,</span><span class="s2">&quot;Tu&quot;</span><span class="p">,</span><span class="s2">&quot;We&quot;</span><span class="p">,</span><span class="s2">&quot;Th&quot;</span><span class="p">,</span><span class="s2">&quot;Fr&quot;</span><span class="p">,</span><span class="s2">&quot;Sa&quot;</span><span class="p">],</span><span class="nx">firstLetterDayNames</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;S&quot;</span><span class="p">,</span><span class="s2">&quot;M&quot;</span><span class="p">,</span><span class="s2">&quot;T&quot;</span><span class="p">,</span><span class="s2">&quot;W&quot;</span><span class="p">,</span><span class="s2">&quot;T&quot;</span><span class="p">,</span><span class="s2">&quot;F&quot;</span><span class="p">,</span><span class="s2">&quot;S&quot;</span><span class="p">],</span><span class="nx">monthNames</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;January&quot;</span><span class="p">,</span><span class="s2">&quot;February&quot;</span><span class="p">,</span><span class="s2">&quot;March&quot;</span><span class="p">,</span><span class="s2">&quot;April&quot;</span><span class="p">,</span><span class="s2">&quot;May&quot;</span><span class="p">,</span><span class="s2">&quot;June&quot;</span><span class="p">,</span><span class="s2">&quot;July&quot;</span><span class="p">,</span><span class="s2">&quot;August&quot;</span><span class="p">,</span><span class="s2">&quot;September&quot;</span><span class="p">,</span><span class="s2">&quot;October&quot;</span><span class="p">,</span><span class="s2">&quot;November&quot;</span><span class="p">,</span><span class="s2">&quot;December&quot;</span><span class="p">],</span><span class="nx">abbreviatedMonthNames</span><span class="o">:</span><span class="p">[</span><span class="s2">&quot;Jan&quot;</span><span class="p">,</span><span class="s2">&quot;Feb&quot;</span><span class="p">,</span><span class="s2">&quot;Mar&quot;</span><span class="p">,</span><span class="s2">&quot;Apr&quot;</span><span class="p">,</span><span class="s2">&quot;May&quot;</span><span class="p">,</span><span class="s2">&quot;Jun&quot;</span><span class="p">,</span><span class="s2">&quot;Jul&quot;</span><span class="p">,</span><span class="s2">&quot;Aug&quot;</span><span class="p">,</span><span class="s2">&quot;Sep&quot;</span><span class="p">,</span><span class="s2">&quot;Oct&quot;</span><span class="p">,</span><span class="s2">&quot;Nov&quot;</span><span class="p">,</span><span class="s2">&quot;Dec&quot;</span><span class="p">],</span><span class="nx">amDesignator</span><span class="o">:</span><span class="s2">&quot;AM&quot;</span><span class="p">,</span><span class="nx">pmDesignator</span><span class="o">:</span><span class="s2">&quot;PM&quot;</span><span class="p">,</span><span class="nx">firstDayOfWeek</span><span class="o">:</span><span class="mi">0</span><span class="p">,</span><span class="nx">twoDigitYearMax</span><span class="o">:</span><span class="mi">2029</span><span class="p">,</span><span class="nx">dateElementOrder</span><span class="o">:</span><span class="s2">&quot;mdy&quot;</span><span class="p">,</span><span class="nx">formatPatterns</span><span class="o">:</span><span class="p">{</span><span class="nx">shortDate</span><span class="o">:</span><span class="s2">&quot;M/d/yyyy&quot;</span><span class="p">,</span><span class="nx">longDate</span><span class="o">:</span><span class="s2">&quot;dddd, MMMM dd, yyyy&quot;</span><span class="p">,</span><span class="nx">shortTime</span><span class="o">:</span><span class="s2">&quot;h:mm tt&quot;</span><span class="p">,</span><span class="nx">longTime</span><span class="o">:</span><span class="s2">&quot;h:mm:ss tt&quot;</span><span class="p">,</span><span class="nx">fullDateTime</span><span class="o">:</span><span class="s2">&quot;dddd, MMMM dd, yyyy h:mm:ss tt&quot;</span><span class="p">,</span><span class="nx">sortableDateTime</span><span class="o">:</span><span class="s2">&quot;yyyy-MM-ddTHH:mm:ss&quot;</span><span class="p">,</span><span class="nx">universalSortableDateTime</span><span class="o">:</span><span class="s2">&quot;yyyy-MM-dd HH:mm:ssZ&quot;</span><span class="p">,</span><span class="nx">rfc1123</span><span class="o">:</span><span class="s2">&quot;ddd, dd MMM yyyy HH:mm:ss GMT&quot;</span><span class="p">,</span><span class="nx">monthDay</span><span class="o">:</span><span class="s2">&quot;MMMM dd&quot;</span><span class="p">,</span><span class="nx">yearMonth</span><span class="o">:</span><span class="s2">&quot;MMMM, yyyy&quot;</span><span class="p">},</span><span class="nx">regexPatterns</span><span class="o">:</span><span class="p">{</span><span class="nx">jan</span><span class="o">:</span><span class="sr">/^jan(uary)?/i</span><span class="p">,</span><span class="nx">feb</span><span class="o">:</span><span class="sr">/^feb(ruary)?/i</span><span class="p">,</span><span class="nx">mar</span><span class="o">:</span><span class="sr">/^mar(ch)?/i</span><span class="p">,</span><span class="nx">apr</span><span class="o">:</span><span class="sr">/^apr(il)?/i</span><span class="p">,</span><span class="nx">may</span><span class="o">:</span><span class="sr">/^may/i</span><span class="p">,</span><span class="nx">jun</span><span class="o">:</span><span class="sr">/^jun(e)?/i</span><span class="p">,</span><span class="nx">jul</span><span class="o">:</span><span class="sr">/^jul(y)?/i</span><span class="p">,</span><span class="nx">aug</span><span class="o">:</span><span class="sr">/^aug(ust)?/i</span><span class="p">,</span><span class="nx">sep</span><span class="o">:</span><span class="sr">/^sep(t(ember)?)?/i</span><span class="p">,</span><span class="nx">oct</span><span class="o">:</span><span class="sr">/^oct(ober)?/i</span><span class="p">,</span><span class="nx">nov</span><span class="o">:</span><span class="sr">/^nov(ember)?/i</span><span class="p">,</span><span class="nx">dec</span><span class="o">:</span><span class="sr">/^dec(ember)?/i</span><span class="p">,</span><span class="nb">sun</span><span class="o">:</span><span class="sr">/^su(n(day)?)?/i</span><span class="p">,</span><span class="nx">mon</span><span class="o">:</span><span class="sr">/^mo(n(day)?)?/i</span><span class="p">,</span><span class="nx">tue</span><span class="o">:</span><span class="sr">/^tu(e(s(day)?)?)?/i</span><span class="p">,</span><span class="nx">wed</span><span class="o">:</span><span class="sr">/^we(d(nesday)?)?/i</span><span class="p">,</span><span class="nx">thu</span><span class="o">:</span><span class="sr">/^th(u(r(s(day)?)?)?)?/i</span><span class="p">,</span><span class="nx">fri</span><span class="o">:</span><span class="sr">/^fr(i(day)?)?/i</span><span class="p">,</span><span class="nx">sat</span><span class="o">:</span><span class="sr">/^sa(t(urday)?)?/i</span><span class="p">,</span><span class="nx">future</span><span class="o">:</span><span class="sr">/^next/i</span><span class="p">,</span><span class="nx">past</span><span class="o">:</span><span class="sr">/^last|past|prev(ious)?/i</span><span class="p">,</span><span class="nx">add</span><span class="o">:</span><span class="sr">/^(\+|after|from)/i</span><span class="p">,</span><span class="nx">subtract</span><span class="o">:</span><span class="sr">/^(\-|before|ago)/i</span><span class="p">,</span><span class="nx">yesterday</span><span class="o">:</span><span class="sr">/^yesterday/i</span><span class="p">,</span><span class="nx">today</span><span class="o">:</span><span class="sr">/^t(oday)?/i</span><span class="p">,</span><span class="nx">tomorrow</span><span class="o">:</span><span class="sr">/^tomorrow/i</span><span class="p">,</span><span class="nx">now</span><span class="o">:</span><span class="sr">/^n(ow)?/i</span><span class="p">,</span><span class="nx">millisecond</span><span class="o">:</span><span class="sr">/^ms|milli(second)?s?/i</span><span class="p">,</span><span class="nx">second</span><span class="o">:</span><span class="sr">/^sec(ond)?s?/i</span><span class="p">,</span><span class="nx">minute</span><span class="o">:</span><span class="sr">/^min(ute)?s?/i</span><span class="p">,</span><span class="nx">hour</span><span class="o">:</span><span class="sr">/^h(ou)?rs?/i</span><span class="p">,</span><span class="nx">week</span><span class="o">:</span><span class="sr">/^w(ee)?k/i</span><span class="p">,</span><span class="nx">month</span><span class="o">:</span><span class="sr">/^m(o(nth)?s?)?/i</span><span class="p">,</span><span class="nx">day</span><span class="o">:</span><span class="sr">/^d(ays?)?/i</span><span class="p">,</span><span class="nx">year</span><span class="o">:</span><span class="sr">/^y((ea)?rs?)?/i</span><span class="p">,</span><span class="nx">shortMeridian</span><span class="o">:</span><span class="sr">/^(a|p)/i</span><span class="p">,</span><span class="nx">longMeridian</span><span class="o">:</span><span class="sr">/^(a\.?m?\.?|p\.?m?\.?)/i</span><span class="p">,</span><span class="nx">timezone</span><span class="o">:</span><span class="sr">/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i</span><span class="p">,</span><span class="nx">ordinalSuffix</span><span class="o">:</span><span class="sr">/^\s*(st|nd|rd|th)/i</span><span class="p">,</span><span class="nx">timeContext</span><span class="o">:</span><span class="sr">/^\s*(\:|a|p)/i</span><span class="p">},</span><span class="nx">abbreviatedTimeZoneStandard</span><span class="o">:</span><span class="p">{</span><span class="nx">GMT</span><span class="o">:</span><span class="s2">&quot;-000&quot;</span><span class="p">,</span><span class="nx">EST</span><span class="o">:</span><span class="s2">&quot;-0400&quot;</span><span class="p">,</span><span class="nx">CST</span><span class="o">:</span><span class="s2">&quot;-0500&quot;</span><span class="p">,</span><span class="nx">MST</span><span class="o">:</span><span class="s2">&quot;-0600&quot;</span><span class="p">,</span><span class="nx">PST</span><span class="o">:</span><span class="s2">&quot;-0700&quot;</span><span class="p">},</span><span class="nx">abbreviatedTimeZoneDST</span><span class="o">:</span><span class="p">{</span><span class="nx">GMT</span><span class="o">:</span><span class="s2">&quot;-000&quot;</span><span class="p">,</span><span class="nx">EDT</span><span class="o">:</span><span class="s2">&quot;-0500&quot;</span><span class="p">,</span><span class="nx">CDT</span><span class="o">:</span><span class="s2">&quot;-0600&quot;</span><span class="p">,</span><span class="nx">MDT</span><span class="o">:</span><span class="s2">&quot;-0700&quot;</span><span class="p">,</span><span class="nx">PDT</span><span class="o">:</span><span class="s2">&quot;-0800&quot;</span><span class="p">}};</span>
<span class="nb">Date</span><span class="p">.</span><span class="nx">getMonthNumberFromName</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">){</span><span class="kd">var</span> <span class="nx">n</span><span class="o">=</span><span class="nb">Date</span><span class="p">.</span><span class="nx">CultureInfo</span><span class="p">.</span><span class="nx">monthNames</span><span class="p">,</span><span class="nx">m</span><span class="o">=</span><span class="nb">Date</span><span class="p">.</span><span class="nx">CultureInfo</span><span class="p">.</span><span class="nx">abbreviatedMonthNames</span><span class="p">,</span><span class="nx">s</span><span class="o">=</span><span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">n</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">n</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">()</span><span class="o">==</span><span class="nx">s</span><span class="o">||</span><span class="nx">m</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">()</span><span class="o">==</span><span class="nx">s</span><span class="p">){</span><span class="k">return</span> <span class="nx">i</span><span class="p">;}}</span>
<span class="k">return</span><span class="o">-</span><span class="mi">1</span><span class="p">;};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">getDayNumberFromName</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">){</span><span class="kd">var</span> <span class="nx">n</span><span class="o">=</span><span class="nb">Date</span><span class="p">.</span><span class="nx">CultureInfo</span><span class="p">.</span><span class="nx">dayNames</span><span class="p">,</span><span class="nx">m</span><span class="o">=</span><span class="nb">Date</span><span class="p">.</span><span class="nx">CultureInfo</span><span class="p">.</span><span class="nx">abbreviatedDayNames</span><span class="p">,</span><span class="nx">o</span><span class="o">=</span><span class="nb">Date</span><span class="p">.</span><span class="nx">CultureInfo</span><span class="p">.</span><span class="nx">shortestDayNames</span><span class="p">,</span><span class="nx">s</span><span class="o">=</span><span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">n</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">n</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">()</span><span class="o">==</span><span class="nx">s</span><span class="o">||</span><span class="nx">m</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">()</span><span class="o">==</span><span class="nx">s</span><span class="p">){</span><span class="k">return</span> <span class="nx">i</span><span class="p">;}}</span>
<span class="k">return</span><span class="o">-</span><span class="mi">1</span><span class="p">;};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">isLeapYear</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">year</span><span class="p">){</span><span class="k">return</span><span class="p">(((</span><span class="nx">year</span><span class="o">%</span><span class="mi">4</span><span class="o">===</span><span class="mi">0</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">year</span><span class="o">%</span><span class="mi">100</span><span class="o">!==</span><span class="mi">0</span><span class="p">))</span><span class="o">||</span><span class="p">(</span><span class="nx">year</span><span class="o">%</span><span class="mi">400</span><span class="o">===</span><span class="mi">0</span><span class="p">));};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">getDaysInMonth</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">year</span><span class="p">,</span><span class="nx">month</span><span class="p">){</span><span class="k">return</span><span class="p">[</span><span class="mi">31</span><span class="p">,(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">isLeapYear</span><span class="p">(</span><span class="nx">year</span><span class="p">)</span><span class="o">?</span><span class="mi">29</span><span class="o">:</span><span class="mi">28</span><span class="p">),</span><span class="mi">31</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">31</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">31</span><span class="p">,</span><span class="mi">31</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">31</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">31</span><span class="p">][</span><span class="nx">month</span><span class="p">];};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">getTimezoneOffset</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span><span class="nx">dst</span><span class="p">){</span><span class="k">return</span><span class="p">(</span><span class="nx">dst</span><span class="o">||</span><span class="kc">false</span><span class="p">)</span><span class="o">?</span><span class="nb">Date</span><span class="p">.</span><span class="nx">CultureInfo</span><span class="p">.</span><span class="nx">abbreviatedTimeZoneDST</span><span class="p">[</span><span class="nx">s</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()]</span><span class="o">:</span><span class="nb">Date</span><span class="p">.</span><span class="nx">CultureInfo</span><span class="p">.</span><span class="nx">abbreviatedTimeZoneStandard</span><span class="p">[</span><span class="nx">s</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()];};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">getTimezoneAbbreviation</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">offset</span><span class="p">,</span><span class="nx">dst</span><span class="p">){</span><span class="kd">var</span> <span class="nx">n</span><span class="o">=</span><span class="p">(</span><span class="nx">dst</span><span class="o">||</span><span class="kc">false</span><span class="p">)</span><span class="o">?</span><span class="nb">Date</span><span class="p">.</span><span class="nx">CultureInfo</span><span class="p">.</span><span class="nx">abbreviatedTimeZoneDST</span><span class="o">:</span><span class="nb">Date</span><span class="p">.</span><span class="nx">CultureInfo</span><span class="p">.</span><span class="nx">abbreviatedTimeZoneStandard</span><span class="p">,</span><span class="nx">p</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="nx">p</span> <span class="k">in</span> <span class="nx">n</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">n</span><span class="p">[</span><span class="nx">p</span><span class="p">]</span><span class="o">===</span><span class="nx">offset</span><span class="p">){</span><span class="k">return</span> <span class="nx">p</span><span class="p">;}}</span>
<span class="k">return</span> <span class="kc">null</span><span class="p">;};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">clone</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getTime</span><span class="p">());};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">compareTo</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">date</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="k">this</span><span class="p">)){</span><span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="k">this</span><span class="p">);}</span>
<span class="k">if</span><span class="p">(</span><span class="nx">date</span> <span class="k">instanceof</span> <span class="nb">Date</span><span class="o">&amp;&amp;!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">date</span><span class="p">)){</span><span class="k">return</span><span class="p">(</span><span class="k">this</span><span class="o">&gt;</span><span class="nx">date</span><span class="p">)</span><span class="o">?</span><span class="mi">1</span><span class="o">:</span><span class="p">(</span><span class="k">this</span><span class="o">&lt;</span><span class="nx">date</span><span class="p">)</span><span class="o">?-</span><span class="mi">1</span><span class="o">:</span><span class="mi">0</span><span class="p">;}</span><span class="k">else</span><span class="p">{</span><span class="k">throw</span> <span class="k">new</span> <span class="nx">TypeError</span><span class="p">(</span><span class="nx">date</span><span class="p">);}};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">equals</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">date</span><span class="p">){</span><span class="k">return</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">compareTo</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span><span class="o">===</span><span class="mi">0</span><span class="p">);};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">between</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">start</span><span class="p">,</span><span class="nx">end</span><span class="p">){</span><span class="kd">var</span> <span class="nx">t</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">getTime</span><span class="p">();</span><span class="k">return</span> <span class="nx">t</span><span class="o">&gt;=</span><span class="nx">start</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span><span class="o">&amp;&amp;</span><span class="nx">t</span><span class="o">&lt;=</span><span class="nx">end</span><span class="p">.</span><span class="nx">getTime</span><span class="p">();};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addMilliseconds</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">setMilliseconds</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getMilliseconds</span><span class="p">()</span><span class="o">+</span><span class="nx">value</span><span class="p">);</span><span class="k">return</span> <span class="k">this</span><span class="p">;};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addSeconds</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">addMilliseconds</span><span class="p">(</span><span class="nx">value</span><span class="o">*</span><span class="mi">1000</span><span class="p">);};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addMinutes</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">addMilliseconds</span><span class="p">(</span><span class="nx">value</span><span class="o">*</span><span class="mi">60000</span><span class="p">);};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addHours</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">addMilliseconds</span><span class="p">(</span><span class="nx">value</span><span class="o">*</span><span class="mi">3600000</span><span class="p">);};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addDays</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">addMilliseconds</span><span class="p">(</span><span class="nx">value</span><span class="o">*</span><span class="mi">86400000</span><span class="p">);};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addWeeks</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">addMilliseconds</span><span class="p">(</span><span class="nx">value</span><span class="o">*</span><span class="mi">604800000</span><span class="p">);};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addMonths</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span><span class="kd">var</span> <span class="nx">n</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">getDate</span><span class="p">();</span><span class="k">this</span><span class="p">.</span><span class="nx">setDate</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">setMonth</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span><span class="o">+</span><span class="nx">value</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">setDate</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">getDaysInMonth</span><span class="p">()));</span><span class="k">return</span> <span class="k">this</span><span class="p">;};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addYears</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">addMonths</span><span class="p">(</span><span class="nx">value</span><span class="o">*</span><span class="mi">12</span><span class="p">);};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">add</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">config</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">config</span><span class="o">==</span><span class="s2">&quot;number&quot;</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">_orient</span><span class="o">=</span><span class="nx">config</span><span class="p">;</span><span class="k">return</span> <span class="k">this</span><span class="p">;}</span>
<span class="kd">var</span> <span class="nx">x</span><span class="o">=</span><span class="nx">config</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">millisecond</span><span class="o">||</span><span class="nx">x</span><span class="p">.</span><span class="nx">milliseconds</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">addMilliseconds</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">millisecond</span><span class="o">||</span><span class="nx">x</span><span class="p">.</span><span class="nx">milliseconds</span><span class="p">);}</span>
<span class="k">if</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">second</span><span class="o">||</span><span class="nx">x</span><span class="p">.</span><span class="nx">seconds</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">addSeconds</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">second</span><span class="o">||</span><span class="nx">x</span><span class="p">.</span><span class="nx">seconds</span><span class="p">);}</span>
<span class="k">if</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">minute</span><span class="o">||</span><span class="nx">x</span><span class="p">.</span><span class="nx">minutes</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">addMinutes</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">minute</span><span class="o">||</span><span class="nx">x</span><span class="p">.</span><span class="nx">minutes</span><span class="p">);}</span>
<span class="k">if</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">hour</span><span class="o">||</span><span class="nx">x</span><span class="p">.</span><span class="nx">hours</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">addHours</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">hour</span><span class="o">||</span><span class="nx">x</span><span class="p">.</span><span class="nx">hours</span><span class="p">);}</span>
<span class="k">if</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">month</span><span class="o">||</span><span class="nx">x</span><span class="p">.</span><span class="nx">months</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">addMonths</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">month</span><span class="o">||</span><span class="nx">x</span><span class="p">.</span><span class="nx">months</span><span class="p">);}</span>
<span class="k">if</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">year</span><span class="o">||</span><span class="nx">x</span><span class="p">.</span><span class="nx">years</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">addYears</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">year</span><span class="o">||</span><span class="nx">x</span><span class="p">.</span><span class="nx">years</span><span class="p">);}</span>
<span class="k">if</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">day</span><span class="o">||</span><span class="nx">x</span><span class="p">.</span><span class="nx">days</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">addDays</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">day</span><span class="o">||</span><span class="nx">x</span><span class="p">.</span><span class="nx">days</span><span class="p">);}</span>
<span class="k">return</span> <span class="k">this</span><span class="p">;};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">_validate</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span><span class="nx">min</span><span class="p">,</span><span class="nx">max</span><span class="p">,</span><span class="nx">name</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span><span class="o">!=</span><span class="s2">&quot;number&quot;</span><span class="p">){</span><span class="k">throw</span> <span class="k">new</span> <span class="nx">TypeError</span><span class="p">(</span><span class="nx">value</span><span class="o">+</span><span class="s2">&quot; is not a Number.&quot;</span><span class="p">);}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">value</span><span class="o">&lt;</span><span class="nx">min</span><span class="o">||</span><span class="nx">value</span><span class="o">&gt;</span><span class="nx">max</span><span class="p">){</span><span class="k">throw</span> <span class="k">new</span> <span class="nx">RangeError</span><span class="p">(</span><span class="nx">value</span><span class="o">+</span><span class="s2">&quot; is not a valid value for &quot;</span><span class="o">+</span><span class="nx">name</span><span class="o">+</span><span class="s2">&quot;.&quot;</span><span class="p">);}</span>
<span class="k">return</span> <span class="kc">true</span><span class="p">;};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">validateMillisecond</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">n</span><span class="p">){</span><span class="k">return</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">_validate</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">999</span><span class="p">,</span><span class="s2">&quot;milliseconds&quot;</span><span class="p">);};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">validateSecond</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">n</span><span class="p">){</span><span class="k">return</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">_validate</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">59</span><span class="p">,</span><span class="s2">&quot;seconds&quot;</span><span class="p">);};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">validateMinute</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">n</span><span class="p">){</span><span class="k">return</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">_validate</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">59</span><span class="p">,</span><span class="s2">&quot;minutes&quot;</span><span class="p">);};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">validateHour</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">n</span><span class="p">){</span><span class="k">return</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">_validate</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="s2">&quot;hours&quot;</span><span class="p">);};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">validateDay</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span><span class="nx">year</span><span class="p">,</span><span class="nx">month</span><span class="p">){</span><span class="k">return</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">_validate</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="nb">Date</span><span class="p">.</span><span class="nx">getDaysInMonth</span><span class="p">(</span><span class="nx">year</span><span class="p">,</span><span class="nx">month</span><span class="p">),</span><span class="s2">&quot;days&quot;</span><span class="p">);};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">validateMonth</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">n</span><span class="p">){</span><span class="k">return</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">_validate</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="s2">&quot;months&quot;</span><span class="p">);};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">validateYear</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">n</span><span class="p">){</span><span class="k">return</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">_validate</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">9999</span><span class="p">,</span><span class="s2">&quot;seconds&quot;</span><span class="p">);};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">set</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">config</span><span class="p">){</span><span class="kd">var</span> <span class="nx">x</span><span class="o">=</span><span class="nx">config</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">x</span><span class="p">.</span><span class="nx">millisecond</span><span class="o">&amp;&amp;</span><span class="nx">x</span><span class="p">.</span><span class="nx">millisecond</span><span class="o">!==</span><span class="mi">0</span><span class="p">){</span><span class="nx">x</span><span class="p">.</span><span class="nx">millisecond</span><span class="o">=-</span><span class="mi">1</span><span class="p">;}</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">x</span><span class="p">.</span><span class="nx">second</span><span class="o">&amp;&amp;</span><span class="nx">x</span><span class="p">.</span><span class="nx">second</span><span class="o">!==</span><span class="mi">0</span><span class="p">){</span><span class="nx">x</span><span class="p">.</span><span class="nx">second</span><span class="o">=-</span><span class="mi">1</span><span class="p">;}</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">x</span><span class="p">.</span><span class="nx">minute</span><span class="o">&amp;&amp;</span><span class="nx">x</span><span class="p">.</span><span class="nx">minute</span><span class="o">!==</span><span class="mi">0</span><span class="p">){</span><span class="nx">x</span><span class="p">.</span><span class="nx">minute</span><span class="o">=-</span><span class="mi">1</span><span class="p">;}</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">x</span><span class="p">.</span><span class="nx">hour</span><span class="o">&amp;&amp;</span><span class="nx">x</span><span class="p">.</span><span class="nx">hour</span><span class="o">!==</span><span class="mi">0</span><span class="p">){</span><span class="nx">x</span><span class="p">.</span><span class="nx">hour</span><span class="o">=-</span><span class="mi">1</span><span class="p">;}</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">x</span><span class="p">.</span><span class="nx">day</span><span class="o">&amp;&amp;</span><span class="nx">x</span><span class="p">.</span><span class="nx">day</span><span class="o">!==</span><span class="mi">0</span><span class="p">){</span><span class="nx">x</span><span class="p">.</span><span class="nx">day</span><span class="o">=-</span><span class="mi">1</span><span class="p">;}</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">x</span><span class="p">.</span><span class="nx">month</span><span class="o">&amp;&amp;</span><span class="nx">x</span><span class="p">.</span><span class="nx">month</span><span class="o">!==</span><span class="mi">0</span><span class="p">){</span><span class="nx">x</span><span class="p">.</span><span class="nx">month</span><span class="o">=-</span><span class="mi">1</span><span class="p">;}</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">x</span><span class="p">.</span><span class="nx">year</span><span class="o">&amp;&amp;</span><span class="nx">x</span><span class="p">.</span><span class="nx">year</span><span class="o">!==</span><span class="mi">0</span><span class="p">){</span><span class="nx">x</span><span class="p">.</span><span class="nx">year</span><span class="o">=-</span><span class="mi">1</span><span class="p">;}</span>
<span class="k">if</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">millisecond</span><span class="o">!=-</span><span class="mi">1</span><span class="o">&amp;&amp;</span><span class="nb">Date</span><span class="p">.</span><span class="nx">validateMillisecond</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">millisecond</span><span class="p">)){</span><span class="k">this</span><span class="p">.</span><span class="nx">addMilliseconds</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">millisecond</span><span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">getMilliseconds</span><span class="p">());}</span>
<span class="k">if</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">second</span><span class="o">!=-</span><span class="mi">1</span><span class="o">&amp;&amp;</span><span class="nb">Date</span><span class="p">.</span><span class="nx">validateSecond</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">second</span><span class="p">)){</span><span class="k">this</span><span class="p">.</span><span class="nx">addSeconds</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">second</span><span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">getSeconds</span><span class="p">());}</span>
<span class="k">if</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">minute</span><span class="o">!=-</span><span class="mi">1</span><span class="o">&amp;&amp;</span><span class="nb">Date</span><span class="p">.</span><span class="nx">validateMinute</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">minute</span><span class="p">)){</span><span class="k">this</span><span class="p">.</span><span class="nx">addMinutes</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">minute</span><span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">getMinutes</span><span class="p">());}</span>
<span class="k">if</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">hour</span><span class="o">!=-</span><span class="mi">1</span><span class="o">&amp;&amp;</span><span class="nb">Date</span><span class="p">.</span><span class="nx">validateHour</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">hour</span><span class="p">)){</span><span class="k">this</span><span class="p">.</span><span class="nx">addHours</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">hour</span><span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">getHours</span><span class="p">());}</span>
<span class="k">if</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">month</span><span class="o">!==-</span><span class="mi">1</span><span class="o">&amp;&amp;</span><span class="nb">Date</span><span class="p">.</span><span class="nx">validateMonth</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">month</span><span class="p">)){</span><span class="k">this</span><span class="p">.</span><span class="nx">addMonths</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">month</span><span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">());}</span>
<span class="k">if</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">year</span><span class="o">!=-</span><span class="mi">1</span><span class="o">&amp;&amp;</span><span class="nb">Date</span><span class="p">.</span><span class="nx">validateYear</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">year</span><span class="p">)){</span><span class="k">this</span><span class="p">.</span><span class="nx">addYears</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">year</span><span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">());}</span>
<span class="k">if</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">day</span><span class="o">!=-</span><span class="mi">1</span><span class="o">&amp;&amp;</span><span class="nb">Date</span><span class="p">.</span><span class="nx">validateDay</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">day</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">(),</span><span class="k">this</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">())){</span><span class="k">this</span><span class="p">.</span><span class="nx">addDays</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">day</span><span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">getDate</span><span class="p">());}</span>
<span class="k">if</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">timezone</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">setTimezone</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">timezone</span><span class="p">);}</span>
<span class="k">if</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">timezoneOffset</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">setTimezoneOffset</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">timezoneOffset</span><span class="p">);}</span>
<span class="k">return</span> <span class="k">this</span><span class="p">;};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">clearTime</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">setHours</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">setMinutes</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">setSeconds</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">setMilliseconds</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="k">return</span> <span class="k">this</span><span class="p">;};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">isLeapYear</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">y</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span><span class="k">return</span><span class="p">(((</span><span class="nx">y</span><span class="o">%</span><span class="mi">4</span><span class="o">===</span><span class="mi">0</span><span class="p">)</span><span class="o">&amp;&amp;</span><span class="p">(</span><span class="nx">y</span><span class="o">%</span><span class="mi">100</span><span class="o">!==</span><span class="mi">0</span><span class="p">))</span><span class="o">||</span><span class="p">(</span><span class="nx">y</span><span class="o">%</span><span class="mi">400</span><span class="o">===</span><span class="mi">0</span><span class="p">));};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">isWeekday</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span><span class="o">!</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">is</span><span class="p">().</span><span class="nx">sat</span><span class="p">()</span><span class="o">||</span><span class="k">this</span><span class="p">.</span><span class="nx">is</span><span class="p">().</span><span class="nb">sun</span><span class="p">());};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getDaysInMonth</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">getDaysInMonth</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">(),</span><span class="k">this</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">());};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">moveToFirstDayOfMonth</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">({</span><span class="nx">day</span><span class="o">:</span><span class="mi">1</span><span class="p">});};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">moveToLastDayOfMonth</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">set</span><span class="p">({</span><span class="nx">day</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">getDaysInMonth</span><span class="p">()});};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">moveToDayOfWeek</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">day</span><span class="p">,</span><span class="nx">orient</span><span class="p">){</span><span class="kd">var</span> <span class="nx">diff</span><span class="o">=</span><span class="p">(</span><span class="nx">day</span><span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">getDay</span><span class="p">()</span><span class="o">+</span><span class="mi">7</span><span class="o">*</span><span class="p">(</span><span class="nx">orient</span><span class="o">||+</span><span class="mi">1</span><span class="p">))</span><span class="o">%</span><span class="mi">7</span><span class="p">;</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">addDays</span><span class="p">((</span><span class="nx">diff</span><span class="o">===</span><span class="mi">0</span><span class="p">)</span><span class="o">?</span><span class="nx">diff</span><span class="o">+=</span><span class="mi">7</span><span class="o">*</span><span class="p">(</span><span class="nx">orient</span><span class="o">||+</span><span class="mi">1</span><span class="p">)</span><span class="o">:</span><span class="nx">diff</span><span class="p">);};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">moveToMonth</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">month</span><span class="p">,</span><span class="nx">orient</span><span class="p">){</span><span class="kd">var</span> <span class="nx">diff</span><span class="o">=</span><span class="p">(</span><span class="nx">month</span><span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span><span class="o">+</span><span class="mi">12</span><span class="o">*</span><span class="p">(</span><span class="nx">orient</span><span class="o">||+</span><span class="mi">1</span><span class="p">))</span><span class="o">%</span><span class="mi">12</span><span class="p">;</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">addMonths</span><span class="p">((</span><span class="nx">diff</span><span class="o">===</span><span class="mi">0</span><span class="p">)</span><span class="o">?</span><span class="nx">diff</span><span class="o">+=</span><span class="mi">12</span><span class="o">*</span><span class="p">(</span><span class="nx">orient</span><span class="o">||+</span><span class="mi">1</span><span class="p">)</span><span class="o">:</span><span class="nx">diff</span><span class="p">);};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getDayOfYear</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">((</span><span class="k">this</span><span class="o">-</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">(),</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span><span class="o">/</span><span class="mi">86400000</span><span class="p">);};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getWeekOfYear</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">firstDayOfWeek</span><span class="p">){</span><span class="kd">var</span> <span class="nx">y</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">(),</span><span class="nx">m</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">(),</span><span class="nx">d</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">getDate</span><span class="p">();</span><span class="kd">var</span> <span class="nx">dow</span><span class="o">=</span><span class="nx">firstDayOfWeek</span><span class="o">||</span><span class="nb">Date</span><span class="p">.</span><span class="nx">CultureInfo</span><span class="p">.</span><span class="nx">firstDayOfWeek</span><span class="p">;</span><span class="kd">var</span> <span class="nx">offset</span><span class="o">=</span><span class="mi">7</span><span class="o">+</span><span class="mi">1</span><span class="o">-</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">y</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">).</span><span class="nx">getDay</span><span class="p">();</span><span class="k">if</span><span class="p">(</span><span class="nx">offset</span><span class="o">==</span><span class="mi">8</span><span class="p">){</span><span class="nx">offset</span><span class="o">=</span><span class="mi">1</span><span class="p">;}</span>
<span class="kd">var</span> <span class="nx">daynum</span><span class="o">=</span><span class="p">((</span><span class="nb">Date</span><span class="p">.</span><span class="nx">UTC</span><span class="p">(</span><span class="nx">y</span><span class="p">,</span><span class="nx">m</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span><span class="o">-</span><span class="nb">Date</span><span class="p">.</span><span class="nx">UTC</span><span class="p">(</span><span class="nx">y</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span><span class="o">/</span><span class="mi">86400000</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span><span class="kd">var</span> <span class="nx">w</span><span class="o">=</span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">((</span><span class="nx">daynum</span><span class="o">-</span><span class="nx">offset</span><span class="o">+</span><span class="mi">7</span><span class="p">)</span><span class="o">/</span><span class="mi">7</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">w</span><span class="o">===</span><span class="nx">dow</span><span class="p">){</span><span class="nx">y</span><span class="o">--</span><span class="p">;</span><span class="kd">var</span> <span class="nx">prevOffset</span><span class="o">=</span><span class="mi">7</span><span class="o">+</span><span class="mi">1</span><span class="o">-</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">y</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">).</span><span class="nx">getDay</span><span class="p">();</span><span class="k">if</span><span class="p">(</span><span class="nx">prevOffset</span><span class="o">==</span><span class="mi">2</span><span class="o">||</span><span class="nx">prevOffset</span><span class="o">==</span><span class="mi">8</span><span class="p">){</span><span class="nx">w</span><span class="o">=</span><span class="mi">53</span><span class="p">;}</span><span class="k">else</span><span class="p">{</span><span class="nx">w</span><span class="o">=</span><span class="mi">52</span><span class="p">;}}</span>
<span class="k">return</span> <span class="nx">w</span><span class="p">;};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">isDST</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;isDST&#39;</span><span class="p">);</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">toString</span><span class="p">().</span><span class="nx">match</span><span class="p">(</span><span class="sr">/(E|C|M|P)(S|D)T/</span><span class="p">)[</span><span class="mi">2</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;D&quot;</span><span class="p">;};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getTimezone</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">getTimezoneAbbreviation</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getUTCOffset</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">isDST</span><span class="p">());};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setTimezoneOffset</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="kd">var</span> <span class="nx">here</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">getTimezoneOffset</span><span class="p">(),</span><span class="nx">there</span><span class="o">=</span><span class="nb">Number</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span><span class="o">*-</span><span class="mi">6</span><span class="o">/</span><span class="mi">10</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">addMinutes</span><span class="p">(</span><span class="nx">there</span><span class="o">-</span><span class="nx">here</span><span class="p">);</span><span class="k">return</span> <span class="k">this</span><span class="p">;};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">setTimezone</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">setTimezoneOffset</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">getTimezoneOffset</span><span class="p">(</span><span class="nx">s</span><span class="p">));};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getUTCOffset</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">n</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">getTimezoneOffset</span><span class="p">()</span><span class="o">*-</span><span class="mi">10</span><span class="o">/</span><span class="mi">6</span><span class="p">,</span><span class="nx">r</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">n</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">){</span><span class="nx">r</span><span class="o">=</span><span class="p">(</span><span class="nx">n</span><span class="o">-</span><span class="mi">10000</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="k">return</span> <span class="nx">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="nx">r</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">2</span><span class="p">);}</span><span class="k">else</span><span class="p">{</span><span class="nx">r</span><span class="o">=</span><span class="p">(</span><span class="nx">n</span><span class="o">+</span><span class="mi">10000</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span><span class="k">return</span><span class="s2">&quot;+&quot;</span><span class="o">+</span><span class="nx">r</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">1</span><span class="p">);}};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getDayName</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">abbrev</span><span class="p">){</span><span class="k">return</span> <span class="nx">abbrev</span><span class="o">?</span><span class="nb">Date</span><span class="p">.</span><span class="nx">CultureInfo</span><span class="p">.</span><span class="nx">abbreviatedDayNames</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">getDay</span><span class="p">()]</span><span class="o">:</span><span class="nb">Date</span><span class="p">.</span><span class="nx">CultureInfo</span><span class="p">.</span><span class="nx">dayNames</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">getDay</span><span class="p">()];};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getMonthName</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">abbrev</span><span class="p">){</span><span class="k">return</span> <span class="nx">abbrev</span><span class="o">?</span><span class="nb">Date</span><span class="p">.</span><span class="nx">CultureInfo</span><span class="p">.</span><span class="nx">abbreviatedMonthNames</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()]</span><span class="o">:</span><span class="nb">Date</span><span class="p">.</span><span class="nx">CultureInfo</span><span class="p">.</span><span class="nx">monthNames</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()];};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_toString</span><span class="o">=</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">;</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">format</span><span class="p">){</span><span class="kd">var</span> <span class="nx">self</span><span class="o">=</span><span class="k">this</span><span class="p">;</span><span class="kd">var</span> <span class="nx">p</span><span class="o">=</span><span class="kd">function</span> <span class="nx">p</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="k">return</span><span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">toString</span><span class="p">().</span><span class="nx">length</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span><span class="o">?</span><span class="s2">&quot;0&quot;</span><span class="o">+</span><span class="nx">s</span><span class="o">:</span><span class="nx">s</span><span class="p">;};</span><span class="k">return</span> <span class="nx">format</span><span class="o">?</span><span class="nx">format</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?/g</span><span class="p">,</span><span class="kd">function</span><span class="p">(</span><span class="nx">format</span><span class="p">){</span><span class="k">switch</span><span class="p">(</span><span class="nx">format</span><span class="p">){</span><span class="k">case</span><span class="s2">&quot;hh&quot;</span><span class="o">:</span><span class="k">return</span> <span class="nx">p</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">getHours</span><span class="p">()</span><span class="o">&lt;</span><span class="mi">13</span><span class="o">?</span><span class="nx">self</span><span class="p">.</span><span class="nx">getHours</span><span class="p">()</span><span class="o">:</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">getHours</span><span class="p">()</span><span class="o">-</span><span class="mi">12</span><span class="p">));</span><span class="k">case</span><span class="s2">&quot;h&quot;</span><span class="o">:</span><span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">getHours</span><span class="p">()</span><span class="o">&lt;</span><span class="mi">13</span><span class="o">?</span><span class="nx">self</span><span class="p">.</span><span class="nx">getHours</span><span class="p">()</span><span class="o">:</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">getHours</span><span class="p">()</span><span class="o">-</span><span class="mi">12</span><span class="p">);</span><span class="k">case</span><span class="s2">&quot;HH&quot;</span><span class="o">:</span><span class="k">return</span> <span class="nx">p</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">getHours</span><span class="p">());</span><span class="k">case</span><span class="s2">&quot;H&quot;</span><span class="o">:</span><span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">getHours</span><span class="p">();</span><span class="k">case</span><span class="s2">&quot;mm&quot;</span><span class="o">:</span><span class="k">return</span> <span class="nx">p</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">getMinutes</span><span class="p">());</span><span class="k">case</span><span class="s2">&quot;m&quot;</span><span class="o">:</span><span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">getMinutes</span><span class="p">();</span><span class="k">case</span><span class="s2">&quot;ss&quot;</span><span class="o">:</span><span class="k">return</span> <span class="nx">p</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">getSeconds</span><span class="p">());</span><span class="k">case</span><span class="s2">&quot;s&quot;</span><span class="o">:</span><span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">getSeconds</span><span class="p">();</span><span class="k">case</span><span class="s2">&quot;yyyy&quot;</span><span class="o">:</span><span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span><span class="k">case</span><span class="s2">&quot;yy&quot;</span><span class="o">:</span><span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">().</span><span class="nx">toString</span><span class="p">().</span><span class="nx">substring</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">);</span><span class="k">case</span><span class="s2">&quot;dddd&quot;</span><span class="o">:</span><span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">getDayName</span><span class="p">();</span><span class="k">case</span><span class="s2">&quot;ddd&quot;</span><span class="o">:</span><span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">getDayName</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="k">case</span><span class="s2">&quot;dd&quot;</span><span class="o">:</span><span class="k">return</span> <span class="nx">p</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">getDate</span><span class="p">());</span><span class="k">case</span><span class="s2">&quot;d&quot;</span><span class="o">:</span><span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">getDate</span><span class="p">().</span><span class="nx">toString</span><span class="p">();</span><span class="k">case</span><span class="s2">&quot;MMMM&quot;</span><span class="o">:</span><span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">getMonthName</span><span class="p">();</span><span class="k">case</span><span class="s2">&quot;MMM&quot;</span><span class="o">:</span><span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">getMonthName</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="k">case</span><span class="s2">&quot;MM&quot;</span><span class="o">:</span><span class="k">return</span> <span class="nx">p</span><span class="p">((</span><span class="nx">self</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span><span class="o">+</span><span class="mi">1</span><span class="p">));</span><span class="k">case</span><span class="s2">&quot;M&quot;</span><span class="o">:</span><span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;t&quot;</span><span class="o">:</span><span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">getHours</span><span class="p">()</span><span class="o">&lt;</span><span class="mi">12</span><span class="o">?</span><span class="nb">Date</span><span class="p">.</span><span class="nx">CultureInfo</span><span class="p">.</span><span class="nx">amDesignator</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="o">:</span><span class="nb">Date</span><span class="p">.</span><span class="nx">CultureInfo</span><span class="p">.</span><span class="nx">pmDesignator</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span><span class="k">case</span><span class="s2">&quot;tt&quot;</span><span class="o">:</span><span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">getHours</span><span class="p">()</span><span class="o">&lt;</span><span class="mi">12</span><span class="o">?</span><span class="nb">Date</span><span class="p">.</span><span class="nx">CultureInfo</span><span class="p">.</span><span class="nx">amDesignator</span><span class="o">:</span><span class="nb">Date</span><span class="p">.</span><span class="nx">CultureInfo</span><span class="p">.</span><span class="nx">pmDesignator</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;zzz&quot;</span><span class="o">:</span><span class="k">case</span><span class="s2">&quot;zz&quot;</span><span class="o">:</span><span class="k">case</span><span class="s2">&quot;z&quot;</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot;&quot;</span><span class="p">;}})</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">_toString</span><span class="p">();};</span>
<span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">today</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">clearTime</span><span class="p">();};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_orient</span><span class="o">=+</span><span class="mi">1</span><span class="p">;</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">next</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">_orient</span><span class="o">=+</span><span class="mi">1</span><span class="p">;</span><span class="k">return</span> <span class="k">this</span><span class="p">;};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">last</span><span class="o">=</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">prev</span><span class="o">=</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">previous</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">_orient</span><span class="o">=-</span><span class="mi">1</span><span class="p">;</span><span class="k">return</span> <span class="k">this</span><span class="p">;};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_is</span><span class="o">=</span><span class="kc">false</span><span class="p">;</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">is</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">_is</span><span class="o">=</span><span class="kc">true</span><span class="p">;</span><span class="k">return</span> <span class="k">this</span><span class="p">;};</span><span class="nb">Number</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_dateElement</span><span class="o">=</span><span class="s2">&quot;day&quot;</span><span class="p">;</span><span class="nb">Number</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">fromNow</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="p">{};</span><span class="nx">c</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">_dateElement</span><span class="p">]</span><span class="o">=</span><span class="k">this</span><span class="p">;</span><span class="k">return</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">add</span><span class="p">(</span><span class="nx">c</span><span class="p">);};</span><span class="nb">Number</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">ago</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="p">{};</span><span class="nx">c</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">_dateElement</span><span class="p">]</span><span class="o">=</span><span class="k">this</span><span class="o">*-</span><span class="mi">1</span><span class="p">;</span><span class="k">return</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">().</span><span class="nx">add</span><span class="p">(</span><span class="nx">c</span><span class="p">);};(</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">$D</span><span class="o">=</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span><span class="nx">$N</span><span class="o">=</span><span class="nb">Number</span><span class="p">.</span><span class="nx">prototype</span><span class="p">;</span><span class="kd">var</span> <span class="nx">dx</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;sunday monday tuesday wednesday thursday friday saturday&quot;</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="sr">/\s/</span><span class="p">),</span><span class="nx">mx</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;january february march april may june july august september october november december&quot;</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="sr">/\s/</span><span class="p">),</span><span class="nx">px</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Millisecond Second Minute Hour Day Week Month Year&quot;</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="sr">/\s/</span><span class="p">),</span><span class="nx">de</span><span class="p">;</span><span class="kd">var</span> <span class="nx">df</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">n</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_is</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">_is</span><span class="o">=</span><span class="kc">false</span><span class="p">;</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">getDay</span><span class="p">()</span><span class="o">==</span><span class="nx">n</span><span class="p">;}</span>
<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">moveToDayOfWeek</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">_orient</span><span class="p">);};};</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">dx</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span><span class="nx">$D</span><span class="p">[</span><span class="nx">dx</span><span class="p">[</span><span class="nx">i</span><span class="p">]]</span><span class="o">=</span><span class="nx">$D</span><span class="p">[</span><span class="nx">dx</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">)]</span><span class="o">=</span><span class="nx">df</span><span class="p">(</span><span class="nx">i</span><span class="p">);}</span>
<span class="kd">var</span> <span class="nx">mf</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">n</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_is</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">_is</span><span class="o">=</span><span class="kc">false</span><span class="p">;</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span><span class="o">===</span><span class="nx">n</span><span class="p">;}</span>
<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">moveToMonth</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">_orient</span><span class="p">);};};</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">j</span><span class="o">&lt;</span><span class="nx">mx</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">j</span><span class="o">++</span><span class="p">){</span><span class="nx">$D</span><span class="p">[</span><span class="nx">mx</span><span class="p">[</span><span class="nx">j</span><span class="p">]]</span><span class="o">=</span><span class="nx">$D</span><span class="p">[</span><span class="nx">mx</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">)]</span><span class="o">=</span><span class="nx">mf</span><span class="p">(</span><span class="nx">j</span><span class="p">);}</span>
<span class="kd">var</span> <span class="nx">ef</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">j</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="nx">j</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">j</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">!=</span><span class="s2">&quot;s&quot;</span><span class="p">){</span><span class="nx">j</span><span class="o">+=</span><span class="s2">&quot;s&quot;</span><span class="p">;}</span>
<span class="k">return</span> <span class="k">this</span><span class="p">[</span><span class="s2">&quot;add&quot;</span><span class="o">+</span><span class="nx">j</span><span class="p">](</span><span class="k">this</span><span class="p">.</span><span class="nx">_orient</span><span class="p">);};};</span><span class="kd">var</span> <span class="nx">nf</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">n</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">_dateElement</span><span class="o">=</span><span class="nx">n</span><span class="p">;</span><span class="k">return</span> <span class="k">this</span><span class="p">;};};</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">k</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">k</span><span class="o">&lt;</span><span class="nx">px</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">k</span><span class="o">++</span><span class="p">){</span><span class="nx">de</span><span class="o">=</span><span class="nx">px</span><span class="p">[</span><span class="nx">k</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">();</span><span class="nx">$D</span><span class="p">[</span><span class="nx">de</span><span class="p">]</span><span class="o">=</span><span class="nx">$D</span><span class="p">[</span><span class="nx">de</span><span class="o">+</span><span class="s2">&quot;s&quot;</span><span class="p">]</span><span class="o">=</span><span class="nx">ef</span><span class="p">(</span><span class="nx">px</span><span class="p">[</span><span class="nx">k</span><span class="p">]);</span><span class="nx">$N</span><span class="p">[</span><span class="nx">de</span><span class="p">]</span><span class="o">=</span><span class="nx">$N</span><span class="p">[</span><span class="nx">de</span><span class="o">+</span><span class="s2">&quot;s&quot;</span><span class="p">]</span><span class="o">=</span><span class="nx">nf</span><span class="p">(</span><span class="nx">de</span><span class="p">);}}());</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toJSONString</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="s2">&quot;yyyy-MM-ddThh:mm:ssZ&quot;</span><span class="p">);};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toShortDateString</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">CultureInfo</span><span class="p">.</span><span class="nx">formatPatterns</span><span class="p">.</span><span class="nx">shortDatePattern</span><span class="p">);};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toLongDateString</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">CultureInfo</span><span class="p">.</span><span class="nx">formatPatterns</span><span class="p">.</span><span class="nx">longDatePattern</span><span class="p">);};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toShortTimeString</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">CultureInfo</span><span class="p">.</span><span class="nx">formatPatterns</span><span class="p">.</span><span class="nx">shortTimePattern</span><span class="p">);};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toLongTimeString</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">CultureInfo</span><span class="p">.</span><span class="nx">formatPatterns</span><span class="p">.</span><span class="nx">longTimePattern</span><span class="p">);};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getOrdinal</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">switch</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()){</span><span class="k">case</span> <span class="mi">1</span><span class="o">:</span><span class="k">case</span> <span class="mi">21</span><span class="o">:</span><span class="k">case</span> <span class="mi">31</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot;st&quot;</span><span class="p">;</span><span class="k">case</span> <span class="mi">2</span><span class="o">:</span><span class="k">case</span> <span class="mi">22</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot;nd&quot;</span><span class="p">;</span><span class="k">case</span> <span class="mi">3</span><span class="o">:</span><span class="k">case</span> <span class="mi">23</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot;rd&quot;</span><span class="p">;</span><span class="k">default</span><span class="o">:</span><span class="k">return</span><span class="s2">&quot;th&quot;</span><span class="p">;}};</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(){</span><span class="nb">Date</span><span class="p">.</span><span class="nx">Parsing</span><span class="o">=</span><span class="p">{</span><span class="nx">Exception</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">message</span><span class="o">=</span><span class="s2">&quot;Parse error at &#39;&quot;</span><span class="o">+</span><span class="nx">s</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot; ...&#39;&quot;</span><span class="p">;}};</span><span class="kd">var</span> <span class="nx">$P</span><span class="o">=</span><span class="nb">Date</span><span class="p">.</span><span class="nx">Parsing</span><span class="p">;</span><span class="kd">var</span> <span class="nx">_</span><span class="o">=</span><span class="nx">$P</span><span class="p">.</span><span class="nx">Operators</span><span class="o">=</span><span class="p">{</span><span class="nx">rtoken</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="kd">var</span> <span class="nx">mx</span><span class="o">=</span><span class="nx">s</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">r</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">mx</span><span class="p">){</span><span class="k">return</span><span class="p">([</span><span class="nx">mx</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nx">s</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">mx</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">)]);}</span><span class="k">else</span><span class="p">{</span><span class="k">throw</span> <span class="k">new</span> <span class="nx">$P</span><span class="p">.</span><span class="nx">Exception</span><span class="p">(</span><span class="nx">s</span><span class="p">);}};},</span><span class="nx">token</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">rtoken</span><span class="p">(</span><span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s2">&quot;^\s*&quot;</span><span class="o">+</span><span class="nx">s</span><span class="o">+</span><span class="s2">&quot;\s*&quot;</span><span class="p">))(</span><span class="nx">s</span><span class="p">);};},</span><span class="nx">stoken</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">rtoken</span><span class="p">(</span><span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s2">&quot;^&quot;</span><span class="o">+</span><span class="nx">s</span><span class="p">));},</span><span class="nx">until</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">p</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="kd">var</span> <span class="nx">qx</span><span class="o">=</span><span class="p">[],</span><span class="nx">rx</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="k">while</span><span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">length</span><span class="p">){</span><span class="k">try</span><span class="p">{</span><span class="nx">rx</span><span class="o">=</span><span class="nx">p</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">s</span><span class="p">);}</span><span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span><span class="nx">qx</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">rx</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span><span class="nx">s</span><span class="o">=</span><span class="nx">rx</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span><span class="k">continue</span><span class="p">;}</span>
<span class="k">break</span><span class="p">;}</span>
<span class="k">return</span><span class="p">[</span><span class="nx">qx</span><span class="p">,</span><span class="nx">s</span><span class="p">];};},</span><span class="nx">many</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">p</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="kd">var</span> <span class="nx">rx</span><span class="o">=</span><span class="p">[],</span><span class="nx">r</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="k">while</span><span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">length</span><span class="p">){</span><span class="k">try</span><span class="p">{</span><span class="nx">r</span><span class="o">=</span><span class="nx">p</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">s</span><span class="p">);}</span><span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span><span class="k">return</span><span class="p">[</span><span class="nx">rx</span><span class="p">,</span><span class="nx">s</span><span class="p">];}</span>
<span class="nx">rx</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span><span class="nx">s</span><span class="o">=</span><span class="nx">r</span><span class="p">[</span><span class="mi">1</span><span class="p">];}</span>
<span class="k">return</span><span class="p">[</span><span class="nx">rx</span><span class="p">,</span><span class="nx">s</span><span class="p">];};},</span><span class="nx">optional</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">p</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="kd">var</span> <span class="nx">r</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="k">try</span><span class="p">{</span><span class="nx">r</span><span class="o">=</span><span class="nx">p</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">s</span><span class="p">);}</span><span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span><span class="k">return</span><span class="p">[</span><span class="kc">null</span><span class="p">,</span><span class="nx">s</span><span class="p">];}</span>
<span class="k">return</span><span class="p">[</span><span class="nx">r</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nx">r</span><span class="p">[</span><span class="mi">1</span><span class="p">]];};},</span><span class="nx">not</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">p</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="k">try</span><span class="p">{</span><span class="nx">p</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">s</span><span class="p">);}</span><span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span><span class="k">return</span><span class="p">[</span><span class="kc">null</span><span class="p">,</span><span class="nx">s</span><span class="p">];}</span>
<span class="k">throw</span> <span class="k">new</span> <span class="nx">$P</span><span class="p">.</span><span class="nx">Exception</span><span class="p">(</span><span class="nx">s</span><span class="p">);};},</span><span class="nx">ignore</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">p</span><span class="p">){</span><span class="k">return</span> <span class="nx">p</span><span class="o">?</span><span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="kd">var</span> <span class="nx">r</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="nx">r</span><span class="o">=</span><span class="nx">p</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">s</span><span class="p">);</span><span class="k">return</span><span class="p">[</span><span class="kc">null</span><span class="p">,</span><span class="nx">r</span><span class="p">[</span><span class="mi">1</span><span class="p">]];}</span><span class="o">:</span><span class="kc">null</span><span class="p">;},</span><span class="nx">product</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">px</span><span class="o">=</span><span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nx">qx</span><span class="o">=</span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="nx">rx</span><span class="o">=</span><span class="p">[];</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">px</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span><span class="nx">rx</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">px</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span><span class="nx">qx</span><span class="p">));}</span>
<span class="k">return</span> <span class="nx">rx</span><span class="p">;},</span><span class="nx">cache</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">rule</span><span class="p">){</span><span class="kd">var</span> <span class="nx">cache</span><span class="o">=</span><span class="p">{},</span><span class="nx">r</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="k">try</span><span class="p">{</span><span class="nx">r</span><span class="o">=</span><span class="nx">cache</span><span class="p">[</span><span class="nx">s</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="nx">cache</span><span class="p">[</span><span class="nx">s</span><span class="p">]</span><span class="o">||</span><span class="nx">rule</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">s</span><span class="p">));}</span><span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span><span class="nx">r</span><span class="o">=</span><span class="nx">cache</span><span class="p">[</span><span class="nx">s</span><span class="p">]</span><span class="o">=</span><span class="nx">e</span><span class="p">;}</span>
<span class="k">if</span><span class="p">(</span><span class="nx">r</span> <span class="k">instanceof</span> <span class="nx">$P</span><span class="p">.</span><span class="nx">Exception</span><span class="p">){</span><span class="k">throw</span> <span class="nx">r</span><span class="p">;}</span><span class="k">else</span><span class="p">{</span><span class="k">return</span> <span class="nx">r</span><span class="p">;}};},</span><span class="nx">any</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">px</span><span class="o">=</span><span class="nx">arguments</span><span class="p">;</span><span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="kd">var</span> <span class="nx">r</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">px</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">px</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="o">==</span><span class="kc">null</span><span class="p">){</span><span class="k">continue</span><span class="p">;}</span>
<span class="k">try</span><span class="p">{</span><span class="nx">r</span><span class="o">=</span><span class="p">(</span><span class="nx">px</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">s</span><span class="p">));}</span><span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span><span class="nx">r</span><span class="o">=</span><span class="kc">null</span><span class="p">;}</span>
<span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="p">){</span><span class="k">return</span> <span class="nx">r</span><span class="p">;}}</span>
<span class="k">throw</span> <span class="k">new</span> <span class="nx">$P</span><span class="p">.</span><span class="nx">Exception</span><span class="p">(</span><span class="nx">s</span><span class="p">);};},</span><span class="nx">each</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">px</span><span class="o">=</span><span class="nx">arguments</span><span class="p">;</span><span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="kd">var</span> <span class="nx">rx</span><span class="o">=</span><span class="p">[],</span><span class="nx">r</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">px</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">px</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="o">==</span><span class="kc">null</span><span class="p">){</span><span class="k">continue</span><span class="p">;}</span>
<span class="k">try</span><span class="p">{</span><span class="nx">r</span><span class="o">=</span><span class="p">(</span><span class="nx">px</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">s</span><span class="p">));}</span><span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span><span class="k">throw</span> <span class="k">new</span> <span class="nx">$P</span><span class="p">.</span><span class="nx">Exception</span><span class="p">(</span><span class="nx">s</span><span class="p">);}</span>
<span class="nx">rx</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span><span class="nx">s</span><span class="o">=</span><span class="nx">r</span><span class="p">[</span><span class="mi">1</span><span class="p">];}</span>
<span class="k">return</span><span class="p">[</span><span class="nx">rx</span><span class="p">,</span><span class="nx">s</span><span class="p">];};},</span><span class="nx">all</span><span class="o">:</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">px</span><span class="o">=</span><span class="nx">arguments</span><span class="p">,</span><span class="nx">_</span><span class="o">=</span><span class="nx">_</span><span class="p">;</span><span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">optional</span><span class="p">(</span><span class="nx">px</span><span class="p">));},</span><span class="nx">sequence</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">px</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="nx">d</span><span class="o">=</span><span class="nx">d</span><span class="o">||</span><span class="nx">_</span><span class="p">.</span><span class="nx">rtoken</span><span class="p">(</span><span class="sr">/^\s*/</span><span class="p">);</span><span class="nx">c</span><span class="o">=</span><span class="nx">c</span><span class="o">||</span><span class="kc">null</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="nx">px</span><span class="p">.</span><span class="nx">length</span><span class="o">==</span><span class="mi">1</span><span class="p">){</span><span class="k">return</span> <span class="nx">px</span><span class="p">[</span><span class="mi">0</span><span class="p">];}</span>
<span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="kd">var</span> <span class="nx">r</span><span class="o">=</span><span class="kc">null</span><span class="p">,</span><span class="nx">q</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="kd">var</span> <span class="nx">rx</span><span class="o">=</span><span class="p">[];</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">px</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span><span class="k">try</span><span class="p">{</span><span class="nx">r</span><span class="o">=</span><span class="nx">px</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">s</span><span class="p">);}</span><span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span><span class="k">break</span><span class="p">;}</span>
<span class="nx">rx</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span><span class="k">try</span><span class="p">{</span><span class="nx">q</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">r</span><span class="p">[</span><span class="mi">1</span><span class="p">]);}</span><span class="k">catch</span><span class="p">(</span><span class="nx">ex</span><span class="p">){</span><span class="nx">q</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="k">break</span><span class="p">;}</span>
<span class="nx">s</span><span class="o">=</span><span class="nx">q</span><span class="p">[</span><span class="mi">1</span><span class="p">];}</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">r</span><span class="p">){</span><span class="k">throw</span> <span class="k">new</span> <span class="nx">$P</span><span class="p">.</span><span class="nx">Exception</span><span class="p">(</span><span class="nx">s</span><span class="p">);}</span>
<span class="k">if</span><span class="p">(</span><span class="nx">q</span><span class="p">){</span><span class="k">throw</span> <span class="k">new</span> <span class="nx">$P</span><span class="p">.</span><span class="nx">Exception</span><span class="p">(</span><span class="nx">q</span><span class="p">[</span><span class="mi">1</span><span class="p">]);}</span>
<span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="p">){</span><span class="k">try</span><span class="p">{</span><span class="nx">r</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">r</span><span class="p">[</span><span class="mi">1</span><span class="p">]);}</span><span class="k">catch</span><span class="p">(</span><span class="nx">ey</span><span class="p">){</span><span class="k">throw</span> <span class="k">new</span> <span class="nx">$P</span><span class="p">.</span><span class="nx">Exception</span><span class="p">(</span><span class="nx">r</span><span class="p">[</span><span class="mi">1</span><span class="p">]);}}</span>
<span class="k">return</span><span class="p">[</span><span class="nx">rx</span><span class="p">,(</span><span class="nx">r</span><span class="o">?</span><span class="nx">r</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">:</span><span class="nx">s</span><span class="p">)];};},</span><span class="nx">between</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">d1</span><span class="p">,</span><span class="nx">p</span><span class="p">,</span><span class="nx">d2</span><span class="p">){</span><span class="nx">d2</span><span class="o">=</span><span class="nx">d2</span><span class="o">||</span><span class="nx">d1</span><span class="p">;</span><span class="kd">var</span> <span class="nx">_fn</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">ignore</span><span class="p">(</span><span class="nx">d1</span><span class="p">),</span><span class="nx">p</span><span class="p">,</span><span class="nx">_</span><span class="p">.</span><span class="nx">ignore</span><span class="p">(</span><span class="nx">d2</span><span class="p">));</span><span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="kd">var</span> <span class="nx">rx</span><span class="o">=</span><span class="nx">_fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">s</span><span class="p">);</span><span class="k">return</span><span class="p">[[</span><span class="nx">rx</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="nx">r</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]],</span><span class="nx">rx</span><span class="p">[</span><span class="mi">1</span><span class="p">]];};},</span><span class="nx">list</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="nx">d</span><span class="o">=</span><span class="nx">d</span><span class="o">||</span><span class="nx">_</span><span class="p">.</span><span class="nx">rtoken</span><span class="p">(</span><span class="sr">/^\s*/</span><span class="p">);</span><span class="nx">c</span><span class="o">=</span><span class="nx">c</span><span class="o">||</span><span class="kc">null</span><span class="p">;</span><span class="k">return</span><span class="p">(</span><span class="nx">p</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="o">?</span><span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">product</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="nx">_</span><span class="p">.</span><span class="nx">ignore</span><span class="p">(</span><span class="nx">d</span><span class="p">)),</span><span class="nx">p</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="nx">_</span><span class="p">.</span><span class="nx">ignore</span><span class="p">(</span><span class="nx">c</span><span class="p">))</span><span class="o">:</span><span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">many</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span><span class="nx">_</span><span class="p">.</span><span class="nx">ignore</span><span class="p">(</span><span class="nx">d</span><span class="p">))),</span><span class="nx">px</span><span class="p">,</span><span class="nx">_</span><span class="p">.</span><span class="nx">ignore</span><span class="p">(</span><span class="nx">c</span><span class="p">)));},</span><span class="nx">set</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">px</span><span class="p">,</span><span class="nx">d</span><span class="p">,</span><span class="nx">c</span><span class="p">){</span><span class="nx">d</span><span class="o">=</span><span class="nx">d</span><span class="o">||</span><span class="nx">_</span><span class="p">.</span><span class="nx">rtoken</span><span class="p">(</span><span class="sr">/^\s*/</span><span class="p">);</span><span class="nx">c</span><span class="o">=</span><span class="nx">c</span><span class="o">||</span><span class="kc">null</span><span class="p">;</span><span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="kd">var</span> <span class="nx">r</span><span class="o">=</span><span class="kc">null</span><span class="p">,</span><span class="nx">p</span><span class="o">=</span><span class="kc">null</span><span class="p">,</span><span class="nx">q</span><span class="o">=</span><span class="kc">null</span><span class="p">,</span><span class="nx">rx</span><span class="o">=</span><span class="kc">null</span><span class="p">,</span><span class="nx">best</span><span class="o">=</span><span class="p">[[],</span><span class="nx">s</span><span class="p">],</span><span class="nx">last</span><span class="o">=</span><span class="kc">false</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">px</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span><span class="nx">q</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="nx">p</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="nx">r</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="nx">last</span><span class="o">=</span><span class="p">(</span><span class="nx">px</span><span class="p">.</span><span class="nx">length</span><span class="o">==</span><span class="mi">1</span><span class="p">);</span><span class="k">try</span><span class="p">{</span><span class="nx">r</span><span class="o">=</span><span class="nx">px</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">s</span><span class="p">);}</span><span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span><span class="k">continue</span><span class="p">;}</span>
<span class="nx">rx</span><span class="o">=</span><span class="p">[[</span><span class="nx">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span><span class="nx">r</span><span class="p">[</span><span class="mi">1</span><span class="p">]];</span><span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">length</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">&amp;&amp;!</span><span class="nx">last</span><span class="p">){</span><span class="k">try</span><span class="p">{</span><span class="nx">q</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">r</span><span class="p">[</span><span class="mi">1</span><span class="p">]);}</span><span class="k">catch</span><span class="p">(</span><span class="nx">ex</span><span class="p">){</span><span class="nx">last</span><span class="o">=</span><span class="kc">true</span><span class="p">;}}</span><span class="k">else</span><span class="p">{</span><span class="nx">last</span><span class="o">=</span><span class="kc">true</span><span class="p">;}</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">last</span><span class="o">&amp;&amp;</span><span class="nx">q</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">length</span><span class="o">===</span><span class="mi">0</span><span class="p">){</span><span class="nx">last</span><span class="o">=</span><span class="kc">true</span><span class="p">;}</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">last</span><span class="p">){</span><span class="kd">var</span> <span class="nx">qx</span><span class="o">=</span><span class="p">[];</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">j</span><span class="o">&lt;</span><span class="nx">px</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">j</span><span class="o">++</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">i</span><span class="o">!=</span><span class="nx">j</span><span class="p">){</span><span class="nx">qx</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">px</span><span class="p">[</span><span class="nx">j</span><span class="p">]);}}</span>
<span class="nx">p</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">qx</span><span class="p">,</span><span class="nx">d</span><span class="p">).</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">q</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span><span class="k">if</span><span class="p">(</span><span class="nx">p</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">){</span><span class="nx">rx</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="nx">rx</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">concat</span><span class="p">(</span><span class="nx">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span><span class="nx">rx</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="nx">p</span><span class="p">[</span><span class="mi">1</span><span class="p">];}}</span>
<span class="k">if</span><span class="p">(</span><span class="nx">rx</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">length</span><span class="o">&lt;</span><span class="nx">best</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">length</span><span class="p">){</span><span class="nx">best</span><span class="o">=</span><span class="nx">rx</span><span class="p">;}</span>
<span class="k">if</span><span class="p">(</span><span class="nx">best</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">length</span><span class="o">===</span><span class="mi">0</span><span class="p">){</span><span class="k">break</span><span class="p">;}}</span>
<span class="k">if</span><span class="p">(</span><span class="nx">best</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="o">===</span><span class="mi">0</span><span class="p">){</span><span class="k">return</span> <span class="nx">best</span><span class="p">;}</span>
<span class="k">if</span><span class="p">(</span><span class="nx">c</span><span class="p">){</span><span class="k">try</span><span class="p">{</span><span class="nx">q</span><span class="o">=</span><span class="nx">c</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">best</span><span class="p">[</span><span class="mi">1</span><span class="p">]);}</span><span class="k">catch</span><span class="p">(</span><span class="nx">ey</span><span class="p">){</span><span class="k">throw</span> <span class="k">new</span> <span class="nx">$P</span><span class="p">.</span><span class="nx">Exception</span><span class="p">(</span><span class="nx">best</span><span class="p">[</span><span class="mi">1</span><span class="p">]);}</span>
<span class="nx">best</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="nx">q</span><span class="p">[</span><span class="mi">1</span><span class="p">];}</span>
<span class="k">return</span> <span class="nx">best</span><span class="p">;};},</span><span class="nx">forward</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">gr</span><span class="p">,</span><span class="nx">fname</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="k">return</span> <span class="nx">gr</span><span class="p">[</span><span class="nx">fname</span><span class="p">].</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">s</span><span class="p">);};},</span><span class="nx">replace</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">rule</span><span class="p">,</span><span class="nx">repl</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="kd">var</span> <span class="nx">r</span><span class="o">=</span><span class="nx">rule</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">s</span><span class="p">);</span><span class="k">return</span><span class="p">[</span><span class="nx">repl</span><span class="p">,</span><span class="nx">r</span><span class="p">[</span><span class="mi">1</span><span class="p">]];};},</span><span class="nx">process</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">rule</span><span class="p">,</span><span class="nx">fn</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="kd">var</span> <span class="nx">r</span><span class="o">=</span><span class="nx">rule</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">s</span><span class="p">);</span><span class="k">return</span><span class="p">[</span><span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="nx">r</span><span class="p">[</span><span class="mi">1</span><span class="p">]];};},</span><span class="nx">min</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">min</span><span class="p">,</span><span class="nx">rule</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="kd">var</span> <span class="nx">rx</span><span class="o">=</span><span class="nx">rule</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">s</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">rx</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="o">&lt;</span><span class="nx">min</span><span class="p">){</span><span class="k">throw</span> <span class="k">new</span> <span class="nx">$P</span><span class="p">.</span><span class="nx">Exception</span><span class="p">(</span><span class="nx">s</span><span class="p">);}</span>
<span class="k">return</span> <span class="nx">rx</span><span class="p">;};}};</span><span class="kd">var</span> <span class="nx">_generator</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">op</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">args</span><span class="o">=</span><span class="kc">null</span><span class="p">,</span><span class="nx">rx</span><span class="o">=</span><span class="p">[];</span><span class="k">if</span><span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">){</span><span class="nx">args</span><span class="o">=</span><span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="k">instanceof</span> <span class="nb">Array</span><span class="p">){</span><span class="nx">args</span><span class="o">=</span><span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">];}</span>
<span class="k">if</span><span class="p">(</span><span class="nx">args</span><span class="p">){</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="nx">px</span><span class="o">=</span><span class="nx">args</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">px</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span><span class="nx">args</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">px</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span><span class="nx">rx</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">op</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="nx">args</span><span class="p">));</span><span class="nx">args</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span><span class="k">return</span> <span class="nx">rx</span><span class="p">;}}</span><span class="k">else</span><span class="p">{</span><span class="k">return</span> <span class="nx">op</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="nx">arguments</span><span class="p">);}};};</span><span class="kd">var</span> <span class="nx">gx</span><span class="o">=</span><span class="s2">&quot;optional not ignore cache&quot;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/\s/</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">gx</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span><span class="nx">_</span><span class="p">[</span><span class="nx">gx</span><span class="p">[</span><span class="nx">i</span><span class="p">]]</span><span class="o">=</span><span class="nx">_generator</span><span class="p">(</span><span class="nx">_</span><span class="p">[</span><span class="nx">gx</span><span class="p">[</span><span class="nx">i</span><span class="p">]]);}</span>
<span class="kd">var</span> <span class="nx">_vector</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">op</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(){</span><span class="k">if</span><span class="p">(</span><span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="k">instanceof</span> <span class="nb">Array</span><span class="p">){</span><span class="k">return</span> <span class="nx">op</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]);}</span><span class="k">else</span><span class="p">{</span><span class="k">return</span> <span class="nx">op</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="nx">arguments</span><span class="p">);}};};</span><span class="kd">var</span> <span class="nx">vx</span><span class="o">=</span><span class="s2">&quot;each any all&quot;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/\s/</span><span class="p">);</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">j</span><span class="o">&lt;</span><span class="nx">vx</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">j</span><span class="o">++</span><span class="p">){</span><span class="nx">_</span><span class="p">[</span><span class="nx">vx</span><span class="p">[</span><span class="nx">j</span><span class="p">]]</span><span class="o">=</span><span class="nx">_vector</span><span class="p">(</span><span class="nx">_</span><span class="p">[</span><span class="nx">vx</span><span class="p">[</span><span class="nx">j</span><span class="p">]]);}}());(</span><span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">flattenAndCompact</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">ax</span><span class="p">){</span><span class="kd">var</span> <span class="nx">rx</span><span class="o">=</span><span class="p">[];</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">ax</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">ax</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="k">instanceof</span> <span class="nb">Array</span><span class="p">){</span><span class="nx">rx</span><span class="o">=</span><span class="nx">rx</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">flattenAndCompact</span><span class="p">(</span><span class="nx">ax</span><span class="p">[</span><span class="nx">i</span><span class="p">]));}</span><span class="k">else</span><span class="p">{</span><span class="k">if</span><span class="p">(</span><span class="nx">ax</span><span class="p">[</span><span class="nx">i</span><span class="p">]){</span><span class="nx">rx</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">ax</span><span class="p">[</span><span class="nx">i</span><span class="p">]);}}}</span>
<span class="k">return</span> <span class="nx">rx</span><span class="p">;};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">Grammar</span><span class="o">=</span><span class="p">{};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">Translator</span><span class="o">=</span><span class="p">{</span><span class="nx">hour</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">hour</span><span class="o">=</span><span class="nb">Number</span><span class="p">(</span><span class="nx">s</span><span class="p">);};},</span><span class="nx">minute</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">minute</span><span class="o">=</span><span class="nb">Number</span><span class="p">(</span><span class="nx">s</span><span class="p">);};},</span><span class="nx">second</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">second</span><span class="o">=</span><span class="nb">Number</span><span class="p">(</span><span class="nx">s</span><span class="p">);};},</span><span class="nx">meridian</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">meridian</span><span class="o">=</span><span class="nx">s</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">).</span><span class="nx">toLowerCase</span><span class="p">();};},</span><span class="nx">timezone</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">n</span><span class="o">=</span><span class="nx">s</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/[^\d\+\-]/g</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">n</span><span class="p">.</span><span class="nx">length</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">timezoneOffset</span><span class="o">=</span><span class="nb">Number</span><span class="p">(</span><span class="nx">n</span><span class="p">);}</span><span class="k">else</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">timezone</span><span class="o">=</span><span class="nx">s</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();}};},</span><span class="nx">day</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">){</span><span class="kd">var</span> <span class="nx">s</span><span class="o">=</span><span class="nx">x</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span><span class="k">return</span> <span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">day</span><span class="o">=</span><span class="nb">Number</span><span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/\d+/</span><span class="p">)[</span><span class="mi">0</span><span class="p">]);};},</span><span class="nx">month</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">month</span><span class="o">=</span><span class="p">((</span><span class="nx">s</span><span class="p">.</span><span class="nx">length</span><span class="o">==</span><span class="mi">3</span><span class="p">)</span><span class="o">?</span><span class="nb">Date</span><span class="p">.</span><span class="nx">getMonthNumberFromName</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span><span class="o">:</span><span class="p">(</span><span class="nb">Number</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">));};},</span><span class="nx">year</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(){</span><span class="kd">var</span> <span class="nx">n</span><span class="o">=</span><span class="nb">Number</span><span class="p">(</span><span class="nx">s</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">year</span><span class="o">=</span><span class="p">((</span><span class="nx">s</span><span class="p">.</span><span class="nx">length</span><span class="o">&gt;</span><span class="mi">2</span><span class="p">)</span><span class="o">?</span><span class="nx">n</span><span class="o">:</span><span class="p">(</span><span class="nx">n</span><span class="o">+</span><span class="p">(((</span><span class="nx">n</span><span class="o">+</span><span class="mi">2000</span><span class="p">)</span><span class="o">&lt;</span><span class="nb">Date</span><span class="p">.</span><span class="nx">CultureInfo</span><span class="p">.</span><span class="nx">twoDigitYearMax</span><span class="p">)</span><span class="o">?</span><span class="mi">2000</span><span class="o">:</span><span class="mi">1900</span><span class="p">)));};},</span><span class="nx">rday</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(){</span><span class="k">switch</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="k">case</span><span class="s2">&quot;yesterday&quot;</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">days</span><span class="o">=-</span><span class="mi">1</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;tomorrow&quot;</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">days</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;today&quot;</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">days</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="k">break</span><span class="p">;</span><span class="k">case</span><span class="s2">&quot;now&quot;</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">days</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">now</span><span class="o">=</span><span class="kc">true</span><span class="p">;</span><span class="k">break</span><span class="p">;}};},</span><span class="nx">finishExact</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">){</span><span class="nx">x</span><span class="o">=</span><span class="p">(</span><span class="nx">x</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">)</span><span class="o">?</span><span class="nx">x</span><span class="o">:</span><span class="p">[</span><span class="nx">x</span><span class="p">];</span><span class="kd">var</span> <span class="nx">now</span><span class="o">=</span><span class="k">new</span> <span class="nb">Date</span><span class="p">();</span><span class="k">this</span><span class="p">.</span><span class="nx">year</span><span class="o">=</span><span class="nx">now</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span><span class="k">this</span><span class="p">.</span><span class="nx">month</span><span class="o">=</span><span class="nx">now</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">();</span><span class="k">this</span><span class="p">.</span><span class="nx">day</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">hour</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">minute</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">second</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">x</span><span class="p">[</span><span class="nx">i</span><span class="p">]){</span><span class="nx">x</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);}}</span>
<span class="k">this</span><span class="p">.</span><span class="nx">hour</span><span class="o">=</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">meridian</span><span class="o">==</span><span class="s2">&quot;p&quot;</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">hour</span><span class="o">&lt;</span><span class="mi">13</span><span class="p">)</span><span class="o">?</span><span class="k">this</span><span class="p">.</span><span class="nx">hour</span><span class="o">+</span><span class="mi">12</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">hour</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">day</span><span class="o">&gt;</span><span class="nb">Date</span><span class="p">.</span><span class="nx">getDaysInMonth</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">year</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">month</span><span class="p">)){</span><span class="k">throw</span> <span class="k">new</span> <span class="nx">RangeError</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">day</span><span class="o">+</span><span class="s2">&quot; is not a valid value for days.&quot;</span><span class="p">);}</span>
<span class="kd">var</span> <span class="nx">r</span><span class="o">=</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">year</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">month</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">day</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">hour</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">minute</span><span class="p">,</span><span class="k">this</span><span class="p">.</span><span class="nx">second</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">timezone</span><span class="p">){</span><span class="nx">r</span><span class="p">.</span><span class="nx">set</span><span class="p">({</span><span class="nx">timezone</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">timezone</span><span class="p">});}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">timezoneOffset</span><span class="p">){</span><span class="nx">r</span><span class="p">.</span><span class="nx">set</span><span class="p">({</span><span class="nx">timezoneOffset</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">timezoneOffset</span><span class="p">});}</span>
<span class="k">return</span> <span class="nx">r</span><span class="p">;},</span><span class="nx">finish</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">){</span><span class="nx">x</span><span class="o">=</span><span class="p">(</span><span class="nx">x</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">)</span><span class="o">?</span><span class="nx">flattenAndCompact</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span><span class="o">:</span><span class="p">[</span><span class="nx">x</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">length</span><span class="o">===</span><span class="mi">0</span><span class="p">){</span><span class="k">return</span> <span class="kc">null</span><span class="p">;}</span>
<span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">x</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">x</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;function&quot;</span><span class="p">){</span><span class="nx">x</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);}}</span>
<span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">now</span><span class="p">){</span><span class="k">return</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();}</span>
<span class="kd">var</span> <span class="nx">today</span><span class="o">=</span><span class="nb">Date</span><span class="p">.</span><span class="nx">today</span><span class="p">();</span><span class="kd">var</span> <span class="nx">method</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="kd">var</span> <span class="nx">expression</span><span class="o">=!!</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">days</span><span class="o">!=</span><span class="kc">null</span><span class="o">||</span><span class="k">this</span><span class="p">.</span><span class="nx">orient</span><span class="o">||</span><span class="k">this</span><span class="p">.</span><span class="nx">operator</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">expression</span><span class="p">){</span><span class="kd">var</span> <span class="nx">gap</span><span class="p">,</span><span class="nx">mod</span><span class="p">,</span><span class="nx">orient</span><span class="p">;</span><span class="nx">orient</span><span class="o">=</span><span class="p">((</span><span class="k">this</span><span class="p">.</span><span class="nx">orient</span><span class="o">==</span><span class="s2">&quot;past&quot;</span><span class="o">||</span><span class="k">this</span><span class="p">.</span><span class="nx">operator</span><span class="o">==</span><span class="s2">&quot;subtract&quot;</span><span class="p">)</span><span class="o">?-</span><span class="mi">1</span><span class="o">:</span><span class="mi">1</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">weekday</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">unit</span><span class="o">=</span><span class="s2">&quot;day&quot;</span><span class="p">;</span><span class="nx">gap</span><span class="o">=</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">getDayNumberFromName</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">weekday</span><span class="p">)</span><span class="o">-</span><span class="nx">today</span><span class="p">.</span><span class="nx">getDay</span><span class="p">());</span><span class="nx">mod</span><span class="o">=</span><span class="mi">7</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">days</span><span class="o">=</span><span class="nx">gap</span><span class="o">?</span><span class="p">((</span><span class="nx">gap</span><span class="o">+</span><span class="p">(</span><span class="nx">orient</span><span class="o">*</span><span class="nx">mod</span><span class="p">))</span><span class="o">%</span><span class="nx">mod</span><span class="p">)</span><span class="o">:</span><span class="p">(</span><span class="nx">orient</span><span class="o">*</span><span class="nx">mod</span><span class="p">);}</span>
<span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">month</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">unit</span><span class="o">=</span><span class="s2">&quot;month&quot;</span><span class="p">;</span><span class="nx">gap</span><span class="o">=</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">month</span><span class="o">-</span><span class="nx">today</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">());</span><span class="nx">mod</span><span class="o">=</span><span class="mi">12</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">months</span><span class="o">=</span><span class="nx">gap</span><span class="o">?</span><span class="p">((</span><span class="nx">gap</span><span class="o">+</span><span class="p">(</span><span class="nx">orient</span><span class="o">*</span><span class="nx">mod</span><span class="p">))</span><span class="o">%</span><span class="nx">mod</span><span class="p">)</span><span class="o">:</span><span class="p">(</span><span class="nx">orient</span><span class="o">*</span><span class="nx">mod</span><span class="p">);</span><span class="k">this</span><span class="p">.</span><span class="nx">month</span><span class="o">=</span><span class="kc">null</span><span class="p">;}</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">unit</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">unit</span><span class="o">=</span><span class="s2">&quot;day&quot;</span><span class="p">;}</span>
<span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">unit</span><span class="o">+</span><span class="s2">&quot;s&quot;</span><span class="p">]</span><span class="o">==</span><span class="kc">null</span><span class="o">||</span><span class="k">this</span><span class="p">.</span><span class="nx">operator</span><span class="o">!=</span><span class="kc">null</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">value</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">value</span><span class="o">=</span><span class="mi">1</span><span class="p">;}</span>
<span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">unit</span><span class="o">==</span><span class="s2">&quot;week&quot;</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">unit</span><span class="o">=</span><span class="s2">&quot;day&quot;</span><span class="p">;</span><span class="k">this</span><span class="p">.</span><span class="nx">value</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">value</span><span class="o">*</span><span class="mi">7</span><span class="p">;}</span>
<span class="k">this</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">unit</span><span class="o">+</span><span class="s2">&quot;s&quot;</span><span class="p">]</span><span class="o">=</span><span class="k">this</span><span class="p">.</span><span class="nx">value</span><span class="o">*</span><span class="nx">orient</span><span class="p">;}</span>
<span class="k">return</span> <span class="nx">today</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="k">this</span><span class="p">);}</span><span class="k">else</span><span class="p">{</span><span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">meridian</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">hour</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">hour</span><span class="o">=</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">hour</span><span class="o">&lt;</span><span class="mi">13</span><span class="o">&amp;&amp;</span><span class="k">this</span><span class="p">.</span><span class="nx">meridian</span><span class="o">==</span><span class="s2">&quot;p&quot;</span><span class="p">)</span><span class="o">?</span><span class="k">this</span><span class="p">.</span><span class="nx">hour</span><span class="o">+</span><span class="mi">12</span><span class="o">:</span><span class="k">this</span><span class="p">.</span><span class="nx">hour</span><span class="p">;}</span>
<span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">weekday</span><span class="o">&amp;&amp;!</span><span class="k">this</span><span class="p">.</span><span class="nx">day</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">day</span><span class="o">=</span><span class="p">(</span><span class="nx">today</span><span class="p">.</span><span class="nx">addDays</span><span class="p">((</span><span class="nb">Date</span><span class="p">.</span><span class="nx">getDayNumberFromName</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">weekday</span><span class="p">)</span><span class="o">-</span><span class="nx">today</span><span class="p">.</span><span class="nx">getDay</span><span class="p">()))).</span><span class="nx">getDate</span><span class="p">();}</span>
<span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">month</span><span class="o">&amp;&amp;!</span><span class="k">this</span><span class="p">.</span><span class="nx">day</span><span class="p">){</span><span class="k">this</span><span class="p">.</span><span class="nx">day</span><span class="o">=</span><span class="mi">1</span><span class="p">;}</span>
<span class="k">return</span> <span class="nx">today</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="k">this</span><span class="p">);}}};</span><span class="kd">var</span> <span class="nx">_</span><span class="o">=</span><span class="nb">Date</span><span class="p">.</span><span class="nx">Parsing</span><span class="p">.</span><span class="nx">Operators</span><span class="p">,</span><span class="nx">g</span><span class="o">=</span><span class="nb">Date</span><span class="p">.</span><span class="nx">Grammar</span><span class="p">,</span><span class="nx">t</span><span class="o">=</span><span class="nb">Date</span><span class="p">.</span><span class="nx">Translator</span><span class="p">,</span><span class="nx">_fn</span><span class="p">;</span><span class="nx">g</span><span class="p">.</span><span class="nx">datePartDelimiter</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">rtoken</span><span class="p">(</span><span class="sr">/^([\s\-\.\,\/\x27]+)/</span><span class="p">);</span><span class="nx">g</span><span class="p">.</span><span class="nx">timePartDelimiter</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">stoken</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">);</span><span class="nx">g</span><span class="p">.</span><span class="nx">whiteSpace</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">rtoken</span><span class="p">(</span><span class="sr">/^\s*/</span><span class="p">);</span><span class="nx">g</span><span class="p">.</span><span class="nx">generalDelimiter</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">rtoken</span><span class="p">(</span><span class="sr">/^(([\s\,]|at|on)+)/</span><span class="p">);</span><span class="kd">var</span> <span class="nx">_C</span><span class="o">=</span><span class="p">{};</span><span class="nx">g</span><span class="p">.</span><span class="nx">ctoken</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">keys</span><span class="p">){</span><span class="kd">var</span> <span class="nx">fn</span><span class="o">=</span><span class="nx">_C</span><span class="p">[</span><span class="nx">keys</span><span class="p">];</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">fn</span><span class="p">){</span><span class="kd">var</span> <span class="nx">c</span><span class="o">=</span><span class="nb">Date</span><span class="p">.</span><span class="nx">CultureInfo</span><span class="p">.</span><span class="nx">regexPatterns</span><span class="p">;</span><span class="kd">var</span> <span class="nx">kx</span><span class="o">=</span><span class="nx">keys</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="sr">/\s+/</span><span class="p">),</span><span class="nx">px</span><span class="o">=</span><span class="p">[];</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">kx</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span><span class="nx">px</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">rtoken</span><span class="p">(</span><span class="nx">c</span><span class="p">[</span><span class="nx">kx</span><span class="p">[</span><span class="nx">i</span><span class="p">]]),</span><span class="nx">kx</span><span class="p">[</span><span class="nx">i</span><span class="p">]));}</span>
<span class="nx">fn</span><span class="o">=</span><span class="nx">_C</span><span class="p">[</span><span class="nx">keys</span><span class="p">]</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">any</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="nx">px</span><span class="p">);}</span>
<span class="k">return</span> <span class="nx">fn</span><span class="p">;};</span><span class="nx">g</span><span class="p">.</span><span class="nx">ctoken2</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">){</span><span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">rtoken</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">CultureInfo</span><span class="p">.</span><span class="nx">regexPatterns</span><span class="p">[</span><span class="nx">key</span><span class="p">]);};</span><span class="nx">g</span><span class="p">.</span><span class="nx">h</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">cache</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">rtoken</span><span class="p">(</span><span class="sr">/^(0[0-9]|1[0-2]|[1-9])/</span><span class="p">),</span><span class="nx">t</span><span class="p">.</span><span class="nx">hour</span><span class="p">));</span><span class="nx">g</span><span class="p">.</span><span class="nx">hh</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">cache</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">rtoken</span><span class="p">(</span><span class="sr">/^(0[0-9]|1[0-2])/</span><span class="p">),</span><span class="nx">t</span><span class="p">.</span><span class="nx">hour</span><span class="p">));</span><span class="nx">g</span><span class="p">.</span><span class="nx">H</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">cache</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">rtoken</span><span class="p">(</span><span class="sr">/^([0-1][0-9]|2[0-3]|[0-9])/</span><span class="p">),</span><span class="nx">t</span><span class="p">.</span><span class="nx">hour</span><span class="p">));</span><span class="nx">g</span><span class="p">.</span><span class="nx">HH</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">cache</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">rtoken</span><span class="p">(</span><span class="sr">/^([0-1][0-9]|2[0-3])/</span><span class="p">),</span><span class="nx">t</span><span class="p">.</span><span class="nx">hour</span><span class="p">));</span><span class="nx">g</span><span class="p">.</span><span class="nx">m</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">cache</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">rtoken</span><span class="p">(</span><span class="sr">/^([0-5][0-9]|[0-9])/</span><span class="p">),</span><span class="nx">t</span><span class="p">.</span><span class="nx">minute</span><span class="p">));</span><span class="nx">g</span><span class="p">.</span><span class="nx">mm</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">cache</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">rtoken</span><span class="p">(</span><span class="sr">/^[0-5][0-9]/</span><span class="p">),</span><span class="nx">t</span><span class="p">.</span><span class="nx">minute</span><span class="p">));</span><span class="nx">g</span><span class="p">.</span><span class="nx">s</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">cache</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">rtoken</span><span class="p">(</span><span class="sr">/^([0-5][0-9]|[0-9])/</span><span class="p">),</span><span class="nx">t</span><span class="p">.</span><span class="nx">second</span><span class="p">));</span><span class="nx">g</span><span class="p">.</span><span class="nx">ss</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">cache</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">rtoken</span><span class="p">(</span><span class="sr">/^[0-5][0-9]/</span><span class="p">),</span><span class="nx">t</span><span class="p">.</span><span class="nx">second</span><span class="p">));</span><span class="nx">g</span><span class="p">.</span><span class="nx">hms</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">cache</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">sequence</span><span class="p">([</span><span class="nx">g</span><span class="p">.</span><span class="nx">H</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">mm</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">ss</span><span class="p">],</span><span class="nx">g</span><span class="p">.</span><span class="nx">timePartDelimiter</span><span class="p">));</span><span class="nx">g</span><span class="p">.</span><span class="nx">t</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">cache</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">ctoken2</span><span class="p">(</span><span class="s2">&quot;shortMeridian&quot;</span><span class="p">),</span><span class="nx">t</span><span class="p">.</span><span class="nx">meridian</span><span class="p">));</span><span class="nx">g</span><span class="p">.</span><span class="nx">tt</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">cache</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">ctoken2</span><span class="p">(</span><span class="s2">&quot;longMeridian&quot;</span><span class="p">),</span><span class="nx">t</span><span class="p">.</span><span class="nx">meridian</span><span class="p">));</span><span class="nx">g</span><span class="p">.</span><span class="nx">z</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">cache</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">rtoken</span><span class="p">(</span><span class="sr">/^(\+|\-)?\s*\d\d\d\d?/</span><span class="p">),</span><span class="nx">t</span><span class="p">.</span><span class="nx">timezone</span><span class="p">));</span><span class="nx">g</span><span class="p">.</span><span class="nx">zz</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">cache</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">rtoken</span><span class="p">(</span><span class="sr">/^(\+|\-)\s*\d\d\d\d/</span><span class="p">),</span><span class="nx">t</span><span class="p">.</span><span class="nx">timezone</span><span class="p">));</span><span class="nx">g</span><span class="p">.</span><span class="nx">zzz</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">cache</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">ctoken2</span><span class="p">(</span><span class="s2">&quot;timezone&quot;</span><span class="p">),</span><span class="nx">t</span><span class="p">.</span><span class="nx">timezone</span><span class="p">));</span><span class="nx">g</span><span class="p">.</span><span class="nx">timeSuffix</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">ignore</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">whiteSpace</span><span class="p">),</span><span class="nx">_</span><span class="p">.</span><span class="nx">set</span><span class="p">([</span><span class="nx">g</span><span class="p">.</span><span class="nx">tt</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">zzz</span><span class="p">]));</span><span class="nx">g</span><span class="p">.</span><span class="nx">time</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">optional</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">ignore</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">stoken</span><span class="p">(</span><span class="s2">&quot;T&quot;</span><span class="p">))),</span><span class="nx">g</span><span class="p">.</span><span class="nx">hms</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">timeSuffix</span><span class="p">);</span><span class="nx">g</span><span class="p">.</span><span class="nx">d</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">cache</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">rtoken</span><span class="p">(</span><span class="sr">/^([0-2]\d|3[0-1]|\d)/</span><span class="p">),</span><span class="nx">_</span><span class="p">.</span><span class="nx">optional</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">ctoken2</span><span class="p">(</span><span class="s2">&quot;ordinalSuffix&quot;</span><span class="p">))),</span><span class="nx">t</span><span class="p">.</span><span class="nx">day</span><span class="p">));</span><span class="nx">g</span><span class="p">.</span><span class="nx">dd</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">cache</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">rtoken</span><span class="p">(</span><span class="sr">/^([0-2]\d|3[0-1])/</span><span class="p">),</span><span class="nx">_</span><span class="p">.</span><span class="nx">optional</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">ctoken2</span><span class="p">(</span><span class="s2">&quot;ordinalSuffix&quot;</span><span class="p">))),</span><span class="nx">t</span><span class="p">.</span><span class="nx">day</span><span class="p">));</span><span class="nx">g</span><span class="p">.</span><span class="nx">ddd</span><span class="o">=</span><span class="nx">g</span><span class="p">.</span><span class="nx">dddd</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">cache</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">ctoken</span><span class="p">(</span><span class="s2">&quot;sun mon tue wed thu fri sat&quot;</span><span class="p">),</span><span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">weekday</span><span class="o">=</span><span class="nx">s</span><span class="p">;};}));</span><span class="nx">g</span><span class="p">.</span><span class="nx">M</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">cache</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">rtoken</span><span class="p">(</span><span class="sr">/^(1[0-2]|0\d|\d)/</span><span class="p">),</span><span class="nx">t</span><span class="p">.</span><span class="nx">month</span><span class="p">));</span><span class="nx">g</span><span class="p">.</span><span class="nx">MM</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">cache</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">rtoken</span><span class="p">(</span><span class="sr">/^(1[0-2]|0\d)/</span><span class="p">),</span><span class="nx">t</span><span class="p">.</span><span class="nx">month</span><span class="p">));</span><span class="nx">g</span><span class="p">.</span><span class="nx">MMM</span><span class="o">=</span><span class="nx">g</span><span class="p">.</span><span class="nx">MMMM</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">cache</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">ctoken</span><span class="p">(</span><span class="s2">&quot;jan feb mar apr may jun jul aug sep oct nov dec&quot;</span><span class="p">),</span><span class="nx">t</span><span class="p">.</span><span class="nx">month</span><span class="p">));</span><span class="nx">g</span><span class="p">.</span><span class="nx">y</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">cache</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">rtoken</span><span class="p">(</span><span class="sr">/^(\d\d?)/</span><span class="p">),</span><span class="nx">t</span><span class="p">.</span><span class="nx">year</span><span class="p">));</span><span class="nx">g</span><span class="p">.</span><span class="nx">yy</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">cache</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">rtoken</span><span class="p">(</span><span class="sr">/^(\d\d)/</span><span class="p">),</span><span class="nx">t</span><span class="p">.</span><span class="nx">year</span><span class="p">));</span><span class="nx">g</span><span class="p">.</span><span class="nx">yyy</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">cache</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">rtoken</span><span class="p">(</span><span class="sr">/^(\d\d?\d?\d?)/</span><span class="p">),</span><span class="nx">t</span><span class="p">.</span><span class="nx">year</span><span class="p">));</span><span class="nx">g</span><span class="p">.</span><span class="nx">yyyy</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">cache</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">rtoken</span><span class="p">(</span><span class="sr">/^(\d\d\d\d)/</span><span class="p">),</span><span class="nx">t</span><span class="p">.</span><span class="nx">year</span><span class="p">));</span><span class="nx">_fn</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">any</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="nx">arguments</span><span class="p">),</span><span class="nx">_</span><span class="p">.</span><span class="nx">not</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">ctoken2</span><span class="p">(</span><span class="s2">&quot;timeContext&quot;</span><span class="p">)));};</span><span class="nx">g</span><span class="p">.</span><span class="nx">day</span><span class="o">=</span><span class="nx">_fn</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">d</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">dd</span><span class="p">);</span><span class="nx">g</span><span class="p">.</span><span class="nx">month</span><span class="o">=</span><span class="nx">_fn</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">M</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">MMM</span><span class="p">);</span><span class="nx">g</span><span class="p">.</span><span class="nx">year</span><span class="o">=</span><span class="nx">_fn</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">yyyy</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">yy</span><span class="p">);</span><span class="nx">g</span><span class="p">.</span><span class="nx">orientation</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">ctoken</span><span class="p">(</span><span class="s2">&quot;past future&quot;</span><span class="p">),</span><span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">orient</span><span class="o">=</span><span class="nx">s</span><span class="p">;};});</span><span class="nx">g</span><span class="p">.</span><span class="nx">operator</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">ctoken</span><span class="p">(</span><span class="s2">&quot;add subtract&quot;</span><span class="p">),</span><span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">operator</span><span class="o">=</span><span class="nx">s</span><span class="p">;};});</span><span class="nx">g</span><span class="p">.</span><span class="nx">rday</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">ctoken</span><span class="p">(</span><span class="s2">&quot;yesterday tomorrow today now&quot;</span><span class="p">),</span><span class="nx">t</span><span class="p">.</span><span class="nx">rday</span><span class="p">);</span><span class="nx">g</span><span class="p">.</span><span class="nx">unit</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">ctoken</span><span class="p">(</span><span class="s2">&quot;minute hour day week month year&quot;</span><span class="p">),</span><span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">unit</span><span class="o">=</span><span class="nx">s</span><span class="p">;};});</span><span class="nx">g</span><span class="p">.</span><span class="nx">value</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">rtoken</span><span class="p">(</span><span class="sr">/^\d\d?(st|nd|rd|th)?/</span><span class="p">),</span><span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="k">return</span> <span class="kd">function</span><span class="p">(){</span><span class="k">this</span><span class="p">.</span><span class="nx">value</span><span class="o">=</span><span class="nx">s</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\D/g</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">);};});</span><span class="nx">g</span><span class="p">.</span><span class="nx">expression</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">set</span><span class="p">([</span><span class="nx">g</span><span class="p">.</span><span class="nx">rday</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">operator</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">unit</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">orientation</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">ddd</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">MMM</span><span class="p">]);</span><span class="nx">_fn</span><span class="o">=</span><span class="kd">function</span><span class="p">(){</span><span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">datePartDelimiter</span><span class="p">);};</span><span class="nx">g</span><span class="p">.</span><span class="nx">mdy</span><span class="o">=</span><span class="nx">_fn</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">ddd</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">month</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">day</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">year</span><span class="p">);</span><span class="nx">g</span><span class="p">.</span><span class="nx">ymd</span><span class="o">=</span><span class="nx">_fn</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">ddd</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">year</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">month</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">day</span><span class="p">);</span><span class="nx">g</span><span class="p">.</span><span class="nx">dmy</span><span class="o">=</span><span class="nx">_fn</span><span class="p">(</span><span class="nx">g</span><span class="p">.</span><span class="nx">ddd</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">day</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">month</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">year</span><span class="p">);</span><span class="nx">g</span><span class="p">.</span><span class="nx">date</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="k">return</span><span class="p">((</span><span class="nx">g</span><span class="p">[</span><span class="nb">Date</span><span class="p">.</span><span class="nx">CultureInfo</span><span class="p">.</span><span class="nx">dateElementOrder</span><span class="p">]</span><span class="o">||</span><span class="nx">g</span><span class="p">.</span><span class="nx">mdy</span><span class="p">).</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="nx">s</span><span class="p">));};</span><span class="nx">g</span><span class="p">.</span><span class="nx">format</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">many</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">any</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">rtoken</span><span class="p">(</span><span class="sr">/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/</span><span class="p">),</span><span class="kd">function</span><span class="p">(</span><span class="nx">fmt</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">g</span><span class="p">[</span><span class="nx">fmt</span><span class="p">]){</span><span class="k">return</span> <span class="nx">g</span><span class="p">[</span><span class="nx">fmt</span><span class="p">];}</span><span class="k">else</span><span class="p">{</span><span class="k">throw</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">Parsing</span><span class="p">.</span><span class="nx">Exception</span><span class="p">(</span><span class="nx">fmt</span><span class="p">);}}),</span><span class="nx">_</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">rtoken</span><span class="p">(</span><span class="sr">/^[^dMyhHmstz]+/</span><span class="p">),</span><span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">ignore</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">stoken</span><span class="p">(</span><span class="nx">s</span><span class="p">));}))),</span><span class="kd">function</span><span class="p">(</span><span class="nx">rules</span><span class="p">){</span><span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">each</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="nx">rules</span><span class="p">),</span><span class="nx">t</span><span class="p">.</span><span class="nx">finishExact</span><span class="p">);});</span><span class="kd">var</span> <span class="nx">_F</span><span class="o">=</span><span class="p">{};</span><span class="kd">var</span> <span class="nx">_get</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">f</span><span class="p">){</span><span class="k">return</span> <span class="nx">_F</span><span class="p">[</span><span class="nx">f</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="nx">_F</span><span class="p">[</span><span class="nx">f</span><span class="p">]</span><span class="o">||</span><span class="nx">g</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="nx">f</span><span class="p">)[</span><span class="mi">0</span><span class="p">]);};</span><span class="nx">g</span><span class="p">.</span><span class="nx">formats</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">fx</span><span class="p">){</span><span class="k">if</span><span class="p">(</span><span class="nx">fx</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">){</span><span class="kd">var</span> <span class="nx">rx</span><span class="o">=</span><span class="p">[];</span><span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">fx</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">){</span><span class="nx">rx</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">_get</span><span class="p">(</span><span class="nx">fx</span><span class="p">[</span><span class="nx">i</span><span class="p">]));}</span>
<span class="k">return</span> <span class="nx">_</span><span class="p">.</span><span class="nx">any</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="nx">rx</span><span class="p">);}</span><span class="k">else</span><span class="p">{</span><span class="k">return</span> <span class="nx">_get</span><span class="p">(</span><span class="nx">fx</span><span class="p">);}};</span><span class="nx">g</span><span class="p">.</span><span class="nx">_formats</span><span class="o">=</span><span class="nx">g</span><span class="p">.</span><span class="nx">formats</span><span class="p">([</span><span class="s2">&quot;yyyy-MM-ddTHH:mm:ss&quot;</span><span class="p">,</span><span class="s2">&quot;ddd, MMM dd, yyyy H:mm:ss tt&quot;</span><span class="p">,</span><span class="s2">&quot;ddd MMM d yyyy HH:mm:ss zzz&quot;</span><span class="p">,</span><span class="s2">&quot;d&quot;</span><span class="p">]);</span><span class="nx">g</span><span class="p">.</span><span class="nx">_start</span><span class="o">=</span><span class="nx">_</span><span class="p">.</span><span class="nx">process</span><span class="p">(</span><span class="nx">_</span><span class="p">.</span><span class="nx">set</span><span class="p">([</span><span class="nx">g</span><span class="p">.</span><span class="nx">date</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">time</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">expression</span><span class="p">],</span><span class="nx">g</span><span class="p">.</span><span class="nx">generalDelimiter</span><span class="p">,</span><span class="nx">g</span><span class="p">.</span><span class="nx">whiteSpace</span><span class="p">),</span><span class="nx">t</span><span class="p">.</span><span class="nx">finish</span><span class="p">);</span><span class="nx">g</span><span class="p">.</span><span class="nx">start</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="k">try</span><span class="p">{</span><span class="kd">var</span> <span class="nx">r</span><span class="o">=</span><span class="nx">g</span><span class="p">.</span><span class="nx">_formats</span><span class="p">.</span><span class="nx">call</span><span class="p">({},</span><span class="nx">s</span><span class="p">);</span><span class="k">if</span><span class="p">(</span><span class="nx">r</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">length</span><span class="o">===</span><span class="mi">0</span><span class="p">){</span><span class="k">return</span> <span class="nx">r</span><span class="p">;}}</span><span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){}</span>
<span class="k">return</span> <span class="nx">g</span><span class="p">.</span><span class="nx">_start</span><span class="p">.</span><span class="nx">call</span><span class="p">({},</span><span class="nx">s</span><span class="p">);};}());</span><span class="nb">Date</span><span class="p">.</span><span class="nx">_parse</span><span class="o">=</span><span class="nb">Date</span><span class="p">.</span><span class="nx">parse</span><span class="p">;</span><span class="nb">Date</span><span class="p">.</span><span class="nx">parse</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="kd">var</span> <span class="nx">r</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">s</span><span class="p">){</span><span class="k">return</span> <span class="kc">null</span><span class="p">;}</span>
<span class="k">try</span><span class="p">{</span><span class="nx">r</span><span class="o">=</span><span class="nb">Date</span><span class="p">.</span><span class="nx">Grammar</span><span class="p">.</span><span class="nx">start</span><span class="p">.</span><span class="nx">call</span><span class="p">({},</span><span class="nx">s</span><span class="p">);}</span><span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span><span class="k">return</span> <span class="kc">null</span><span class="p">;}</span>
<span class="k">return</span><span class="p">((</span><span class="nx">r</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">length</span><span class="o">===</span><span class="mi">0</span><span class="p">)</span><span class="o">?</span><span class="nx">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">:</span><span class="kc">null</span><span class="p">);};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">getParseFunction</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">fx</span><span class="p">){</span><span class="kd">var</span> <span class="nx">fn</span><span class="o">=</span><span class="nb">Date</span><span class="p">.</span><span class="nx">Grammar</span><span class="p">.</span><span class="nx">formats</span><span class="p">(</span><span class="nx">fx</span><span class="p">);</span><span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span><span class="kd">var</span> <span class="nx">r</span><span class="o">=</span><span class="kc">null</span><span class="p">;</span><span class="k">try</span><span class="p">{</span><span class="nx">r</span><span class="o">=</span><span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">({},</span><span class="nx">s</span><span class="p">);}</span><span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span><span class="k">return</span> <span class="kc">null</span><span class="p">;}</span>
<span class="k">return</span><span class="p">((</span><span class="nx">r</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">length</span><span class="o">===</span><span class="mi">0</span><span class="p">)</span><span class="o">?</span><span class="nx">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">:</span><span class="kc">null</span><span class="p">);};};</span><span class="nb">Date</span><span class="p">.</span><span class="nx">parseExact</span><span class="o">=</span><span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span><span class="nx">fx</span><span class="p">){</span><span class="k">return</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">getParseFunction</span><span class="p">(</span><span class="nx">fx</span><span class="p">)(</span><span class="nx">s</span><span class="p">);};</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 